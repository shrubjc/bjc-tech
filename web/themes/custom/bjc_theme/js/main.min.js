
jQuery(document).ready(function(o){var s=o(window).scrollTop();o(window).scroll(function(){var e;1024<o(window).width()&&(e=o(window).scrollTop(),s<e&&e<100?(o(".site-newheader").addClass("on-scroll-down"),o(".site-newheader").removeClass("on-scroll-up")):(o(".site-newheader").removeClass("on-scroll-down"),o(".site-newheader").addClass("on-scroll-up"),o(".site-newheader").removeClass("on-pin")),e<100&&(o(".site-newheader").removeClass("on-scroll-down"),o(".site-newheader").removeClass("on-scroll-up")),s<e&&600<e&&o(".site-newheader").addClass("on-pin"),0===o("#toolbar-administration").length&&o(".site-newheader").addClass("anonymous-user"),s=e)})});



//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuaW1hdGlvbi5qcyIsImhlYWRlci5qcyIsImlubmVyLXBhZ2UtZmxleC5qcyIsImxpc3QtcGFnZXMuanMiLCJtYWluLmpzIl0sIm5hbWVzIjpbImpRdWVyeSIsImRvY3VtZW50IiwicmVhZHkiLCIkIiwicG9zaXRpb24iLCJ3aW5kb3ciLCJzY3JvbGxUb3AiLCJzY3JvbGwiLCJ3aWR0aCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJsZW5ndGgiXSwibWFwcGluZ3MiOiJBQUFBO0FDQUFBLE9BQU9DLFFBQVEsRUFBRUMsTUFBTSxTQUFTQyxHQUc1QixJQUFJQyxFQUFXRCxFQUFFRSxNQUFNLEVBQUVDLFVBQVUsRUFFbkNILEVBQUVFLE1BQU0sRUFBRUUsT0FBTyxXQUNmLElBQ01BLEVBRGlCLEtBQXBCSixFQUFFRSxNQUFNLEVBQUVHLE1BQU0sSUFDYkQsRUFBU0osRUFBRUUsTUFBTSxFQUFFQyxVQUFVLEVBQ3JCRixFQUFURyxHQUFxQkEsRUFBUyxLQUMvQkosRUFBRSxpQkFBaUIsRUFBRU0sU0FBUyxnQkFBZ0IsRUFDOUNOLEVBQUUsaUJBQWlCLEVBQUVPLFlBQVksY0FBYyxJQUUvQ1AsRUFBRSxpQkFBaUIsRUFBRU8sWUFBWSxnQkFBZ0IsRUFDakRQLEVBQUUsaUJBQWlCLEVBQUVNLFNBQVMsY0FBYyxFQUM1Q04sRUFBRSxpQkFBaUIsRUFBRU8sWUFBWSxRQUFRLEdBR3hDSCxFQUFTLE1BQ1ZKLEVBQUUsaUJBQWlCLEVBQUVPLFlBQVksZ0JBQWdCLEVBQ2pEUCxFQUFFLGlCQUFpQixFQUFFTyxZQUFZLGNBQWMsR0FHckNOLEVBQVRHLEdBQThCLElBQVRBLEdBQ3RCSixFQUFFLGlCQUFpQixFQUFFTSxTQUFTLFFBQVEsRUFFRyxJQUF4Q04sRUFBRSx5QkFBeUIsRUFBRVEsUUFDOUJSLEVBQUUsaUJBQWlCLEVBQUVNLFNBQVMsZ0JBQWdCLEVBRWhETCxFQUFXRyxFQUdmLENBQUMsQ0EwSUwsQ0FBQztBQ3pLRDtBQ0FBO0FDQUEiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBqUXVlcnkoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCQpIHtcblxuLy8gICAgIC8vR3JlZW5zb2NrIENvbmZpZ1xuLy8gICAgIGdzYXAuY29uZmlnKHtcbi8vICAgICAgIG51bGxUYXJnZXRXYXJuOiBmYWxzZSxcbi8vICAgICB9KTtcbi8vICAgICAvL0dyYWRpZW50IEFuaW1hdGlvbnNcbi8vICAgICAkKCcuaW5uZXItaGVyby5iYWNrZ3JvdW5kLXJveWFsLWJsdWUsIC5zaW5nbGUtYmxvZ19oZXJvLCAuYmxvZy1saXN0X2hlcm8nKS5lYWNoKGZ1bmN0aW9uKCl7XG4vLyAgICAgICAgIGNvbnN0IGIxID0gXCJsaW5lYXItZ3JhZGllbnQoMjY2LjVkZWcsICM3MEFGRDcgLTM4LjM1JSwgIzAwNTI5QiA1Ni4xNyUsICMwMDMxNUQgMTM0LjYyJSlcIjtcbi8vICAgICAgICAgY29uc3QgYjIgPSBcImxpbmVhci1ncmFkaWVudCgxN2RlZywgIzcwQUZENyAtMzguMzUlLCAjMDA1MjlCIDU2LjE3JSwgIzAwMzE1RCAxMzQuNjIlKVwiO1xuLy8gICAgICAgICBnc2FwLmZyb21UbyhcIi5iYWNrZ3JvdW5kLXJveWFsLWJsdWUsIC5zaW5nbGUtYmxvZ19oZXJvLCAuYmxvZy1saXN0X2hlcm9cIiwge2JhY2tncm91bmQ6IGIxfSwge2Vhc2U6IFwibm9uZVwiLCBkdXJhdGlvbjogMTAsIGJhY2tncm91bmQ6IGIyLCByZXBlYXQ6IC0xLCB5b3lvOiB0cnVlfSk7XG4vLyAgICAgfSk7XG4vLyAgICAgJCgnLmlubmVyLWhlcm8uYmFja2dyb3VuZC10ZWFsJykuZWFjaChmdW5jdGlvbigpe1xuLy8gICAgICAgICBjb25zdCBiMSA9IFwibGluZWFyLWdyYWRpZW50KDI2Ni41ZGVnLCAjMjhCQUQ5IC0xMy4xMSUsICMxMTlGQkQgNTAuMDklLCAjMDA4Q0FBIDEwMi41NSUpXCI7XG4vLyAgICAgICAgIGNvbnN0IGIyID0gXCJsaW5lYXItZ3JhZGllbnQoMTdkZWcsICMyOEJBRDkgLTEzLjExJSwgIzExOUZCRCA1MC4wOSUsICMwMDhDQUEgMTAyLjU1JSlcIjtcbi8vICAgICAgICAgZ3NhcC5mcm9tVG8oXCIuYmFja2dyb3VuZC10ZWFsXCIsIHtiYWNrZ3JvdW5kOiBiMX0sIHtlYXNlOiBcIm5vbmVcIiwgZHVyYXRpb246IDEwLCBiYWNrZ3JvdW5kOiBiMiwgcmVwZWF0OiAtMSwgeW95bzogdHJ1ZX0pO1xuLy8gICAgIH0pO1xuLy8gICAgICQoJy5pbm5lci1oZXJvLmJhY2tncm91bmQtb3JhbmdlJykuZWFjaChmdW5jdGlvbigpe1xuLy8gICAgICAgICBjb25zdCBiMSA9IFwibGluZWFyLWdyYWRpZW50KDI2Ni41ZGVnLCAjRDU2RjFCIC0xMy4xMSUsICM5NDFCMDAgMTAyLjU1JSlcIjtcbi8vICAgICAgICAgY29uc3QgYjIgPSBcImxpbmVhci1ncmFkaWVudCgxN2RlZywgI0Q1NkYxQiAtMTMuMTElLCAjOTQxQjAwIDEwMi41NSUpXCI7XG4vLyAgICAgICAgIGdzYXAuZnJvbVRvKFwiLmJhY2tncm91bmQtb3JhbmdlXCIsIHtiYWNrZ3JvdW5kOiBiMX0sIHtlYXNlOiBcIm5vbmVcIiwgZHVyYXRpb246IDgsIGJhY2tncm91bmQ6IGIyLCByZXBlYXQ6IC0xLCB5b3lvOiB0cnVlfSk7XG4vLyAgICAgfSk7XG4vLyAgICAgJCgnLmlubmVyLWhlcm8uYmFja2dyb3VuZC1wdXJwbGUnKS5lYWNoKGZ1bmN0aW9uKCl7XG4vLyAgICAgICAgIGNvbnN0IGIxID0gXCJsaW5lYXItZ3JhZGllbnQoMjY2LjVkZWcsICAjN0EyNTg4IC0xMy4xMSUsICM0RDA2NTggMTAyLjU1JSlcIjtcbi8vICAgICAgICAgY29uc3QgYjIgPSBcImxpbmVhci1ncmFkaWVudCgxN2RlZywgICM3QTI1ODggLTEzLjExJSwgIzREMDY1OCAxMDIuNTUlKVwiO1xuLy8gICAgICAgICBnc2FwLmZyb21UbyhcIi5iYWNrZ3JvdW5kLXB1cnBsZVwiLCB7YmFja2dyb3VuZDogYjF9LCB7ZWFzZTogXCJub25lXCIsIGR1cmF0aW9uOiA4LCBiYWNrZ3JvdW5kOiBiMiwgcmVwZWF0OiAtMSwgeW95bzogdHJ1ZX0pO1xuLy8gICAgIH0pO1xuLy8gICAgICQoJy5pbm5lci1oZXJvLmJhY2tncm91bmQtZ3JlZW4nKS5lYWNoKGZ1bmN0aW9uKCl7XG4vLyAgICAgICAgIGNvbnN0IGIxID0gXCJsaW5lYXItZ3JhZGllbnQoMjY2LjU0ZGVnLCAjODE4OTM5IC0xMy4xMSUsICMzMzUzMUEgMTAyLjU1JSlcIjtcbi8vICAgICAgICAgY29uc3QgYjIgPSBcImxpbmVhci1ncmFkaWVudCgxN2RlZywgICM4MTg5MzkgLTEzLjExJSwgIzMzNTMxQSAxMDIuNTUlKVwiO1xuLy8gICAgICAgICBnc2FwLmZyb21UbyhcIi5iYWNrZ3JvdW5kLWdyZWVuXCIsIHtiYWNrZ3JvdW5kOiBiMX0sIHtlYXNlOiBcIm5vbmVcIiwgZHVyYXRpb246IDgsIGJhY2tncm91bmQ6IGIyLCByZXBlYXQ6IC0xLCB5b3lvOiB0cnVlfSk7XG4vLyAgICAgfSk7XG5cbi8vICAgICAvL0hlcm9zXG4vLyAgICAgbGV0IHBhcmFsbGF4ID0gZ3NhcC50aW1lbGluZSgpXG4vLyAgICAgICAgIC50bygnLmlubmVyLWhlcm8gLmNvbnRhaW5lciwgLnNpbmdsZS1ibG9nX2hlcm8gLmNvbnRhaW5lciwgLmJsb2ctbGlzdF9oZXJvIC5jb250YWluZXInLCB7XG4vLyAgICAgICAgICAgICB5Oi0xMDAsXG4vLyAgICAgICAgICAgICBzY3JvbGxUcmlnZ2VyOntcbi8vICAgICAgICAgICAgIHRyaWdnZXI6Jy5pbm5lci1oZXJvLCAuaGVyby1hcmVhJyxcbi8vICAgICAgICAgICAgIHN0YXJ0OictMTAwJyxcbi8vICAgICAgICAgICAgIGVuZDonYm90dG9tJyxcbi8vICAgICAgICAgICAgIHNjcnViOicwLjMnLFxuLy8gICAgICAgICB9XG4vLyAgICAgfSlcblxuXG5cbi8vICAgICAvL3Jlc291cmNlcyBxdWljayBsaW5rIGNhcmRzXG4vLyAgICAgJCgnLmNvbnRlbnQtY2FyZHMsIC5hZGRyZXNzLWNhcmQsIC5hY2FkZW1pYy1jYWxlbmRhci1jYXJkcyAuY2FyZC1pdGVtJykuZWFjaChmdW5jdGlvbigpe1xuLy8gICAgICAgICBjb25zdCBiMSA9IFwibGluZWFyLWdyYWRpZW50KDI1MC4wM2RlZywgICNENTZGMUIgMTAwJSwgI0ZGQzUwQSAxMDAlKVwiO1xuLy8gICAgICAgICBjb25zdCBiMiA9IFwibGluZWFyLWdyYWRpZW50KDI1MC4wM2RlZywgI0ZGQzUwQSAxMS44MiUsICNENTZGMUIgMTQ1Ljg5JSlcIjtcbi8vICAgICAgICAgJChkb2N1bWVudCkub24oJ21vdXNlZW50ZXIgbW91c2VsZWF2ZSB0b3VjaGVuZCcsICcuY29udGVudC1jYXJkc19pdGVtLCAuYWRkcmVzcy1jYXJkLCAuYWNhZGVtaWMtY2FsZW5kYXItY2FyZHMgLmNhcmQtaXRlbScsIGZ1bmN0aW9uIChldikge1xuLy8gICAgICAgICAgICAgdmFyIGVsID0galF1ZXJ5KHRoaXMpLmZpbmQoJ2knKTtcbi8vICAgICAgICAgICAgIGlmKGV2LnR5cGUgPT09ICdtb3VzZWVudGVyJykge1xuLy8gICAgICAgICAgICAgICAgIFR3ZWVuTWF4LnN0YWdnZXJUbyhlbCwgMC44LCB7J2JhY2tncm91bmQtaW1hZ2UnOiBiMSwgZWFzZTpQb3dlcjQuZWFzZU91dH0sMC4wNyk7XG4vLyAgICAgICAgICAgICB9IGVsc2Uge1xuLy8gICAgICAgICAgICAgICAgIFR3ZWVuTWF4LnN0YWdnZXJUbyhlbCwgMC44LCB7J2JhY2tncm91bmQtaW1hZ2UnOiBiMiwgZWFzZTpQb3dlcjQuZWFzZU91dH0sMC4wNyk7XG4vLyAgICAgICAgICAgICB9XG4vLyAgICAgICAgIH0pO1xuLy8gICAgIH0pO1xuLy8gICAgIC8vIEhvbWUgSGVyb1xuLy8gICAgIGxldCBoZXJvQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaG9tZXBhZ2UtaGVyb19jb250ZW50XCIpXG5cbi8vICAgICBoZXJvQ29udGVudC5mb3JFYWNoKCAoZWxlbWVudCkgPT4ge1xuXG4vLyAgICAgICAgIGxldCBoZWFkaW5ncyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcImgxXCIpXG4vLyAgICAgICAgIGxldCBjb3B5ID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwicFwiKVxuLy8gICAgICAgICBsZXQgbGlua3MgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaG9tZXBhZ2UtaGVyb19idXR0b25zXCIpXG4vLyAgICAgICAgIGdzYXAuc2V0KFtoZWFkaW5ncywgY29weSwgbGlua3NdLFxuLy8gICAgICAgICB7b3BhY2l0eTogMCwgc2NhbGU6IDEsIHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnfSlcbi8vICAgICAgICAgZ3NhcC5zZXQoaGVhZGluZ3MsIHtzY2FsZTogMC45fSlcbi8vICAgICAgICAgZ3NhcC5zZXQoY29weSwge3k6IDUwfSlcbi8vICAgICAgICAgZ3NhcC5zZXQobGlua3MsIHt5OiA1MH0pXG5cbi8vICAgICAgICAgbGV0IHRsID0gZ3NhcC50aW1lbGluZSgpXG5cbi8vICAgICAgICAgLnRvKGhlYWRpbmdzLCB7b3BhY2l0eTogMSwgc2NhbGU6IDEsIHk6IDAsIHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnfSwgXCItPTAuNVwiKVxuLy8gICAgICAgICAudG8oY29weSwge29wYWNpdHk6IDEsIHNjYWxlOiAxLCB5OiAwLCB0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJ30sIFwiLT0wLjdcIilcbi8vICAgICAgICAgLnRvKGxpbmtzLHtvcGFjaXR5OiAxLCBzY2FsZTogMSwgeTogMCwgdHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJSd9LCBcIi09MC45XCIpXG5cbi8vICAgICAgICAgU2Nyb2xsVHJpZ2dlci5jcmVhdGUoe1xuLy8gICAgICAgICAgICAgdHJpZ2dlcjplbGVtZW50LFxuLy8gICAgICAgICAgICAgc3RhcnQ6XCJ0b3AgOTAlXCIsXG4vLyAgICAgICAgICAgICB0b2dnbGVBY3Rpb25zOlwicGxheSBub25lIG5vbmUgbm9uZVwiLFxuLy8gICAgICAgICAgICAgYW5pbWF0aW9uOnRsXG4vLyAgICAgICAgIH0pXG5cbi8vICAgICB9KVxuXG5cblxuLy8gICAgIC8vIC8vRnVsbCBXaWR0aC9pbm5lciBmbGV4IEFuaW1hdGlvbnNcbi8vICAgICAvL1xuLy8gICAgIC8vIC8vNTAvNTBcbi8vICAgICBsZXQgY29udGVudEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5mdWxsLXdpZHRoLWNvbnRlbnQuY29udGVudC1pbWFnZSAuY29udGVudC1pbWFnZV9jb250ZW50XCIpXG5cbi8vICAgICBjb250ZW50SW1hZ2UuZm9yRWFjaCggKGVsZW1lbnQpID0+IHtcblxuLy8gICAgICAgICBsZXQgc3ViSGVhZCA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcihcInNwYW5cIilcbi8vICAgICAgICAgbGV0IGhlYWRpbmdzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiaDJcIilcbi8vICAgICAgICAgbGV0IGNvcHkgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29weVwiKVxuLy8gICAgICAgICBnc2FwLnNldChbaGVhZGluZ3MsIHN1YkhlYWQsIGNvcHldLFxuLy8gICAgICAgICB7b3BhY2l0eTogMCwgc2NhbGU6IDEsIHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnfSlcbi8vICAgICAgICAgZ3NhcC5zZXQoaGVhZGluZ3MsIHtzY2FsZTogMC45fSlcbi8vICAgICAgICAgZ3NhcC5zZXQoY29weSwge3k6IDUwfSlcblxuLy8gICAgICAgICBsZXQgdGwgPSBnc2FwLnRpbWVsaW5lKClcblxuLy8gICAgICAgICAudG8oc3ViSGVhZCwge29wYWNpdHk6IDEsIHNjYWxlOiAxLCB5OiAwLCB0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJ30pXG4vLyAgICAgICAgIC50byhoZWFkaW5ncywge29wYWNpdHk6IDEsIHNjYWxlOiAxLCB5OiAwLCB0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJ30sIFwiLT0wLjFcIilcbi8vICAgICAgICAgLnRvKGNvcHksIHtvcGFjaXR5OiAxLCBzY2FsZTogMSwgeTogMCwgdHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJSd9LCBcIi09MC4zXCIpXG5cbi8vICAgICAgICAgU2Nyb2xsVHJpZ2dlci5jcmVhdGUoe1xuLy8gICAgICAgICAgICAgdHJpZ2dlcjplbGVtZW50LFxuLy8gICAgICAgICAgICAgc3RhcnQ6XCJ0b3AgOTAlXCIsXG4vLyAgICAgICAgICAgICB0b2dnbGVBY3Rpb25zOlwicGxheSBub25lIG5vbmUgbm9uZVwiLFxuLy8gICAgICAgICAgICAgYW5pbWF0aW9uOnRsXG4vLyAgICAgICAgIH0pXG5cbi8vICAgICB9KVxuLy8gICAgIC8vNTAvNTAgTGlua3MgcmVwZWF0ZXJcbi8vICAgICAkKCcuZnVsbC13aWR0aC1jb250ZW50LmNvbnRlbnQtaW1hZ2UgLmNvbnRlbnQtaW1hZ2VfY29udGVudCcpLmVhY2goZnVuY3Rpb24oKXtcblxuLy8gICAgICAgICBnc2FwLnV0aWxzLnRvQXJyYXkoJy5jb250ZW50LWltYWdlX2NvbnRlbnQnKS5mb3JFYWNoKChzZWMsIGkpID0+IHtcbi8vICAgICAgICAgICBnc2FwLnNldCgnLmNvbnRlbnQtaW1hZ2VfY29udGVudCBhJywge29wYWNpdHk6IDAsIHk6IDUwLCBzY2FsZTogLjl9KSxcblxuLy8gICAgICAgICAgIFNjcm9sbFRyaWdnZXIuYmF0Y2goXCIuY29udGVudC1pbWFnZV9jb250ZW50IGFcIiwge1xuLy8gICAgICAgICAgICAgb25FbnRlcjogYmF0Y2ggPT4gZ3NhcC50byhiYXRjaCwge29wYWNpdHk6IDEsIHNjYWxlOiAxLCB5OiAwLCBzdGFnZ2VyOiB7ZWFjaDogMC4xNSwgZ3JpZDogWzEsIDFdfSwgb3ZlcndyaXRlOiB0cnVlfSlcbi8vICAgICAgICAgICB9KTtcbi8vICAgICAgICAgfSk7XG4vLyAgICAgfSk7XG5cbi8vICAgICAvL0ZlYXR1cmVkIEltYWdlIGNvbnRlbnRcbi8vICAgICBsZXQgZmVhdHVyZWRJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZnVsbC13aWR0aC1jb250ZW50LmZlYXR1cmVkLWltYWdlLWJsb2NrIC5jb250YWluZXJcIilcblxuLy8gICAgIGZlYXR1cmVkSW1hZ2UuZm9yRWFjaCggKGVsZW1lbnQpID0+IHtcblxuLy8gICAgICAgICBsZXQgaGVhZGluZ3MgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJoMlwiKVxuLy8gICAgICAgICBsZXQgY29weSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb3B5XCIpXG4vLyAgICAgICAgIGxldCBpbWFnZSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbWFnZS13cmFwXCIpXG4vLyAgICAgICAgIGdzYXAuc2V0KFtoZWFkaW5ncywgY29weSwgaW1hZ2VdLFxuLy8gICAgICAgICB7b3BhY2l0eTogMCwgc2NhbGU6IDEsIHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnfSlcbi8vICAgICAgICAgZ3NhcC5zZXQoaGVhZGluZ3MsIHtzY2FsZTogMC45fSlcbi8vICAgICAgICAgZ3NhcC5zZXQoY29weSwge3k6IDUwfSlcbi8vICAgICAgICAgZ3NhcC5zZXQoaW1hZ2UsIHt5OiA1MH0pXG5cbi8vICAgICAgICAgbGV0IHRsID0gZ3NhcC50aW1lbGluZSgpXG5cbi8vICAgICAgICAgLnRvKGhlYWRpbmdzLCB7b3BhY2l0eTogMSwgc2NhbGU6IDEsIHk6IDAsIHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnfSwgXCItPTAuMVwiKVxuLy8gICAgICAgICAudG8oY29weSwge29wYWNpdHk6IDEsIHNjYWxlOiAxLCB5OiAwLCB0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJ30sIFwiLT0wLjNcIilcbi8vICAgICAgICAgLnRvKGltYWdlLHtvcGFjaXR5OiAxLCBzY2FsZTogMSwgeTogMCwgdHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJSd9LCBcIi09MC41XCIpXG5cbi8vICAgICAgICAgU2Nyb2xsVHJpZ2dlci5jcmVhdGUoe1xuLy8gICAgICAgICAgICAgdHJpZ2dlcjplbGVtZW50LFxuLy8gICAgICAgICAgICAgc3RhcnQ6XCJ0b3AgOTAlXCIsXG4vLyAgICAgICAgICAgICB0b2dnbGVBY3Rpb25zOlwicGxheSBub25lIG5vbmUgbm9uZVwiLFxuLy8gICAgICAgICAgICAgYW5pbWF0aW9uOnRsXG4vLyAgICAgICAgIH0pXG5cbi8vICAgICB9KVxuXG4vLyAgICAgLy9zdGF0c1xuLy8gICAgIGNvbnN0IGl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zdGF0IC5udW1iZXJcIik7XG4vLyAgICAgbGV0IHRsID0gZ3NhcC50aW1lbGluZSgpXG5cbi8vICAgICAuZnJvbShpdGVtcywge3RleHRDb250ZW50OiAwLCBkdXJhdGlvbjogMywgZWFzZTogXCJwb3dlcjEuaW5cIiwgc25hcDogeyB0ZXh0Q29udGVudDogMSB9LCBzdGFnZ2VyOiB7IGVhY2g6IDAuMixcbi8vICAgICAgICAgb25VcGRhdGU6IGZ1bmN0aW9uKCkge1xuLy8gICAgICAgICAgIHRoaXMudGFyZ2V0cygpWzBdLmlubmVySFRNTCA9IChNYXRoLmNlaWwodGhpcy50YXJnZXRzKClbMF0udGV4dENvbnRlbnQpKTtcbi8vICAgICAgICAgfSxcbi8vICAgICAgIH1cbi8vICAgICB9KTtcbi8vICAgICBTY3JvbGxUcmlnZ2VyLmNyZWF0ZSh7XG4vLyAgICAgICAgIHRyaWdnZXI6Jy5zdGF0LWdyaWQnLFxuLy8gICAgICAgICBzdGFydDpcInRvcCA5MCVcIixcbi8vICAgICAgICAgdG9nZ2xlQWN0aW9uczpcInBsYXkgbm9uZSBub25lIG5vbmVcIixcbi8vICAgICAgICAgYW5pbWF0aW9uOnRsXG4vLyAgICAgfSlcblxuLy8gICAgIC8vUHJvZ3JhbSBzbGlkZXJcbi8vICAgICBsZXQgcHJvZ3JhbVNsaWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZnVsbC13aWR0aC1jb250ZW50LnByb2dyYW0tc2xpZGVyIC5wcm9ncmFtLXNsaWRlcl9jb250ZW50XCIpXG5cbi8vICAgICBwcm9ncmFtU2xpZGVyLmZvckVhY2goIChlbGVtZW50KSA9PiB7XG5cbi8vICAgICAgICAgbGV0IHN1YkhlYWQgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJzcGFuXCIpXG4vLyAgICAgICAgIGxldCBoZWFkaW5ncyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcImgyXCIpXG4vLyAgICAgICAgIGxldCBjb3B5ID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvcHlcIilcbi8vICAgICAgICAgbGV0IGxpbmsgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubGluay1hcnJvd1wiKVxuLy8gICAgICAgICBnc2FwLnNldChbaGVhZGluZ3MsIHN1YkhlYWQsIGNvcHksIGxpbmtdLFxuLy8gICAgICAgICB7b3BhY2l0eTogMCwgc2NhbGU6IDEsIHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnfSlcbi8vICAgICAgICAgZ3NhcC5zZXQoaGVhZGluZ3MsIHtzY2FsZTogMC45fSlcbi8vICAgICAgICAgZ3NhcC5zZXQoY29weSwge3k6IDUwfSlcbi8vICAgICAgICAgZ3NhcC5zZXQobGluaywge3k6IDUwfSlcblxuLy8gICAgICAgICBsZXQgdGwgPSBnc2FwLnRpbWVsaW5lKClcblxuLy8gICAgICAgICAudG8oc3ViSGVhZCwge29wYWNpdHk6IDEsIHNjYWxlOiAxLCB5OiAwLCB0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJ30pXG4vLyAgICAgICAgIC50byhoZWFkaW5ncywge29wYWNpdHk6IDEsIHNjYWxlOiAxLCB5OiAwLCB0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJ30sIFwiLT0wLjFcIilcbi8vICAgICAgICAgLnRvKGNvcHksIHtvcGFjaXR5OiAxLCBzY2FsZTogMSwgeTogMCwgdHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJSd9LCBcIi09MC4zXCIpXG4vLyAgICAgICAgIC50byhsaW5rLHtvcGFjaXR5OiAxLCBzY2FsZTogMSwgeTogMCwgdHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJSd9LCBcIi09MC41XCIpXG5cbi8vICAgICAgICAgU2Nyb2xsVHJpZ2dlci5jcmVhdGUoe1xuLy8gICAgICAgICAgICAgdHJpZ2dlcjplbGVtZW50LFxuLy8gICAgICAgICAgICAgc3RhcnQ6XCJ0b3AgOTAlXCIsXG4vLyAgICAgICAgICAgICB0b2dnbGVBY3Rpb25zOlwicGxheSBub25lIG5vbmUgbm9uZVwiLFxuLy8gICAgICAgICAgICAgYW5pbWF0aW9uOnRsXG4vLyAgICAgICAgIH0pXG5cbi8vICAgICB9KVxuXG4vLyAgICAgLy9OZXdzXG4vLyAgICAgLy9GZWF0dXJlZFxuLy8gICAgIGxldCByZWNlbnROZXdzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5mdWxsLXdpZHRoLWNvbnRlbnQucmVjZW50LW5ld3MgLmNvbnRhaW5lclwiKVxuXG4vLyAgICAgcmVjZW50TmV3cy5mb3JFYWNoKCAoZWxlbWVudCkgPT4ge1xuXG4vLyAgICAgICAgIGxldCBwb3N0c0hlYWRpbmcgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJoMlwiKVxuLy8gICAgICAgICBsZXQgZmVhdHVyZWRJbWcgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZmVhdHVyZWQtcG9zdHMgLnBvc3QtaW1hZ2VcIilcbi8vICAgICAgICAgbGV0IGZlYXR1cmVkSGVhZGluZ3MgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZmVhdHVyZWQtcG9zdHMgaDRcIilcbi8vICAgICAgICAgbGV0IGZlYXR1cmVkQ29weSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mZWF0dXJlZC1wb3N0cyAuY29weVwiKVxuXG4vLyAgICAgICAgIGdzYXAuc2V0KFtwb3N0c0hlYWRpbmcsIGZlYXR1cmVkSW1nLCBmZWF0dXJlZEhlYWRpbmdzLCBmZWF0dXJlZENvcHldLFxuLy8gICAgICAgICB7b3BhY2l0eTogMCwgc2NhbGU6IDEsIHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnfSlcbi8vICAgICAgICAgZ3NhcC5zZXQocG9zdHNIZWFkaW5nLCB7c2NhbGU6IDAuOX0pXG4vLyAgICAgICAgIGdzYXAuc2V0KGZlYXR1cmVkSW1nLCB7eTogNTB9KVxuLy8gICAgICAgICBnc2FwLnNldChmZWF0dXJlZEhlYWRpbmdzLCB7eTogNTB9KVxuLy8gICAgICAgICBnc2FwLnNldChmZWF0dXJlZENvcHksIHt5OiA1MH0pXG5cbi8vICAgICAgICAgbGV0IHRsID0gZ3NhcC50aW1lbGluZSgpXG5cbi8vICAgICAgICAgLnRvKHBvc3RzSGVhZGluZyx7b3BhY2l0eTogMSwgc2NhbGU6IDEsIHk6IDAsIHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnfSwgMClcbi8vICAgICAgICAgLnRvKGZlYXR1cmVkSW1nLHtvcGFjaXR5OiAxLCBzY2FsZTogMSwgeTogMCwgdHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJSd9LCBcIi09MC4zXCIpXG4vLyAgICAgICAgIC50byhmZWF0dXJlZEhlYWRpbmdzLCB7b3BhY2l0eTogMSwgc2NhbGU6IDEsIHk6IDAsIHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnfSwgXCItPTAuNVwiKVxuLy8gICAgICAgICAudG8oZmVhdHVyZWRDb3B5LCB7b3BhY2l0eTogMSwgc2NhbGU6IDEsIHk6IDAsIHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnfSwgXCItPTAuN1wiKVxuXG4vLyAgICAgICAgIFNjcm9sbFRyaWdnZXIuY3JlYXRlKHtcbi8vICAgICAgICAgICAgIHRyaWdnZXI6ZWxlbWVudCxcbi8vICAgICAgICAgICAgIHN0YXJ0OlwidG9wIDkwJVwiLFxuLy8gICAgICAgICAgICAgdG9nZ2xlQWN0aW9uczpcInBsYXkgbm9uZSBub25lIG5vbmVcIixcbi8vICAgICAgICAgICAgIGFuaW1hdGlvbjp0bFxuLy8gICAgICAgICB9KVxuXG4vLyAgICAgfSlcbi8vICAgICAvL3JlZ3VsYXIgcG9zdHNcbi8vICAgICBsZXQgcmVjZW50UG9zdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZnVsbC13aWR0aC1jb250ZW50LnJlY2VudC1uZXdzIFwiKVxuXG4vLyAgICAgcmVjZW50UG9zdC5mb3JFYWNoKCAoZWxlbWVudCkgPT4ge1xuXG4vLyAgICAgICAgIGxldCBwb3N0ID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvc3RzIC5wb3N0XCIpXG4vLyAgICAgICAgIGxldCBsaW5rID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvc3RzIGFcIilcblxuLy8gICAgICAgICBnc2FwLnNldChbcG9zdCwgbGlua10sXG4vLyAgICAgICAgIHtvcGFjaXR5OiAwLCBzY2FsZTogMSwgdHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJSd9KVxuLy8gICAgICAgICBnc2FwLnNldChwb3N0LCB7eTogNTB9KVxuLy8gICAgICAgICBnc2FwLnNldChsaW5rLCB7c2NhbGU6IDAuOX0pXG5cbi8vICAgICAgICAgbGV0IHRsID0gZ3NhcC50aW1lbGluZSgpXG5cbi8vICAgICAgICAgLnRvKHBvc3Qse29wYWNpdHk6IDEsIHNjYWxlOiAxLCB5OiAwLCB0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJ30sIDApXG4vLyAgICAgICAgIC50byhsaW5rLCB7b3BhY2l0eTogMSwgc2NhbGU6IDEsIHk6IDAsIHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnfSwgXCItPTAuM1wiKVxuXG4vLyAgICAgICAgIFNjcm9sbFRyaWdnZXIuY3JlYXRlKHtcbi8vICAgICAgICAgICAgIHRyaWdnZXI6ZWxlbWVudCxcbi8vICAgICAgICAgICAgIHN0YXJ0OlwidG9wIDkwJVwiLFxuLy8gICAgICAgICAgICAgdG9nZ2xlQWN0aW9uczpcInBsYXkgbm9uZSBub25lIG5vbmVcIixcbi8vICAgICAgICAgICAgIGFuaW1hdGlvbjp0bFxuLy8gICAgICAgICB9KVxuXG4vLyAgICAgfSlcblxuLy8gICAgIC8vVXBjb21pbmcgZXZlbnRzXG4vLyAgICAgbGV0IGFjYUNhbGVuZGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi51cGNvbWluZy1ldmVudHMgLnVwY29taW5nLWV2ZW50c19hY2FfY2FyZFwiKVxuXG4vLyAgICAgYWNhQ2FsZW5kYXIuZm9yRWFjaCggKGVsZW1lbnQpID0+IHtcblxuLy8gICAgICAgICBsZXQgaWNvbiA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcihcImlcIilcbi8vICAgICAgICAgbGV0IGhlYWRpbmcgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJoMlwiKVxuLy8gICAgICAgICBsZXQgY29weSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcihcInBcIilcbi8vICAgICAgICAgbGV0IGxpbmsgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJhXCIpXG4vLyAgICAgICAgIGdzYXAuc2V0KFtpY29uLCBoZWFkaW5nLCBjb3B5LCBsaW5rXSxcbi8vICAgICAgICAge29wYWNpdHk6IDAsIHNjYWxlOiAxLCB0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJ30pXG4vLyAgICAgICAgIGdzYXAuc2V0KGhlYWRpbmcsIHtzY2FsZTogMC45fSlcbi8vICAgICAgICAgZ3NhcC5zZXQoaWNvbiwge3NjYWxlOiAwLjl9KVxuLy8gICAgICAgICBnc2FwLnNldChjb3B5LCB7eTogNTB9KVxuLy8gICAgICAgICBnc2FwLnNldChsaW5rLCB7eTogNTB9KVxuXG4vLyAgICAgICAgIGxldCB0bCA9IGdzYXAudGltZWxpbmUoKVxuXG4vLyAgICAgICAgIC50byhoZWFkaW5nLCB7b3BhY2l0eTogMSwgc2NhbGU6IDEsIHk6IDAsIHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnfSwgXCItPTAuMVwiKVxuLy8gICAgICAgICAudG8oaWNvbiwge29wYWNpdHk6IDEsIHNjYWxlOiAxLCB5OiAwLCB0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJ30sIDApXG4vLyAgICAgICAgIC50byhjb3B5LCB7b3BhY2l0eTogMSwgc2NhbGU6IDEsIHk6IDAsIHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnfSwgXCItPTAuM1wiKVxuLy8gICAgICAgICAudG8obGluaywge29wYWNpdHk6IDEsIHNjYWxlOiAxLCB5OiAwLCB0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJ30sIFwiLT0wLjVcIilcblxuLy8gICAgICAgICBTY3JvbGxUcmlnZ2VyLmNyZWF0ZSh7XG4vLyAgICAgICAgICAgICB0cmlnZ2VyOmVsZW1lbnQsXG4vLyAgICAgICAgICAgICBzdGFydDpcInRvcCA5MCVcIixcbi8vICAgICAgICAgICAgIHRvZ2dsZUFjdGlvbnM6XCJwbGF5IG5vbmUgbm9uZSBub25lXCIsXG4vLyAgICAgICAgICAgICBhbmltYXRpb246dGxcbi8vICAgICAgICAgfSlcblxuLy8gICAgIH0pXG4vLyAgICAgLy9ldmVudCBpbWFnZVxuLy8gICAgIGxldCBldmVudExpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnVwY29taW5nLWV2ZW50cyAudXBjb21pbmctZXZlbnRzX2V2ZW50XCIpXG5cbi8vICAgICBldmVudExpbmsuZm9yRWFjaCggKGVsZW1lbnQpID0+IHtcblxuLy8gICAgICAgICBsZXQgaGVhZGluZyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcImgyXCIpXG4vLyAgICAgICAgIGxldCBsaW5rID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiYVwiKVxuLy8gICAgICAgICBnc2FwLnNldChbaGVhZGluZywgbGlua10sXG4vLyAgICAgICAgIHtvcGFjaXR5OiAwLCBzY2FsZTogMSwgdHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJSd9KVxuLy8gICAgICAgICBnc2FwLnNldChoZWFkaW5nLCB7c2NhbGU6IDAuOX0pXG4vLyAgICAgICAgIGdzYXAuc2V0KGxpbmssIHt5OiA1MH0pXG5cbi8vICAgICAgICAgbGV0IHRsID0gZ3NhcC50aW1lbGluZSgpXG5cbi8vICAgICAgICAgLnRvKGhlYWRpbmcsIHtvcGFjaXR5OiAxLCBzY2FsZTogMSwgeTogMCwgdHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJSd9LCBcIi09MC43XCIpXG4vLyAgICAgICAgIC50byhsaW5rLCB7b3BhY2l0eTogMSwgc2NhbGU6IDEsIHk6IDAsIHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnfSwgXCItPTAuOVwiKVxuXG4vLyAgICAgICAgIFNjcm9sbFRyaWdnZXIuY3JlYXRlKHtcbi8vICAgICAgICAgICAgIHRyaWdnZXI6ZWxlbWVudCxcbi8vICAgICAgICAgICAgIHN0YXJ0OlwidG9wIDkwJVwiLFxuLy8gICAgICAgICAgICAgdG9nZ2xlQWN0aW9uczpcInBsYXkgbm9uZSBub25lIG5vbmVcIixcbi8vICAgICAgICAgICAgIGFuaW1hdGlvbjp0bFxuLy8gICAgICAgICB9KVxuXG4vLyAgICAgfSlcblxuLy8gICAgIC8vIFZpZGVvIEdhbGxlcnlcbi8vICAgICBsZXQgcXVvdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZ1bGwtd2lkdGgtY29udGVudC5mZWF0dXJlZC12aWRlby1nYWxsZXJ5IC5tYWluLWNvbnRlbnRcIilcblxuLy8gICAgIHF1b3RlLmZvckVhY2goIChlbGVtZW50KSA9PiB7XG5cbi8vICAgICAgICAgbGV0IGhlYWRpbmdzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiaDJcIilcbi8vICAgICAgICAgbGV0IGNvcHkgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJwXCIpXG4vLyAgICAgICAgIGxldCB2aWRlbyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi52aWRlb1wiKVxuLy8gICAgICAgICBnc2FwLnNldChbaGVhZGluZ3MsIGNvcHksIHZpZGVvXSxcbi8vICAgICAgICAge29wYWNpdHk6IDAsIHNjYWxlOiAxLCB0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJ30pXG4vLyAgICAgICAgIGdzYXAuc2V0KGhlYWRpbmdzLCB7c2NhbGU6IDAuOX0pXG4vLyAgICAgICAgIGdzYXAuc2V0KGNvcHksIHt5OiA1MH0pXG4vLyAgICAgICAgIGdzYXAuc2V0KHZpZGVvLCB7eTogNTB9KVxuXG4vLyAgICAgICAgIGxldCB0bCA9IGdzYXAudGltZWxpbmUoKVxuXG4vLyAgICAgICAgIC50byhoZWFkaW5ncywge29wYWNpdHk6IDEsIHNjYWxlOiAxLCB5OiAwLCB0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJ30sIFwiLT0wLjFcIilcbi8vICAgICAgICAgLnRvKGNvcHksIHtvcGFjaXR5OiAxLCBzY2FsZTogMSwgeTogMCwgdHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJSd9LCBcIi09MC4zXCIpXG4vLyAgICAgICAgIC50byh2aWRlbyx7b3BhY2l0eTogMSwgc2NhbGU6IDEsIHk6IDAsIHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnfSwgXCItPTAuNVwiKVxuXG4vLyAgICAgICAgIFNjcm9sbFRyaWdnZXIuY3JlYXRlKHtcbi8vICAgICAgICAgICAgIHRyaWdnZXI6ZWxlbWVudCxcbi8vICAgICAgICAgICAgIHN0YXJ0OlwidG9wIDkwJVwiLFxuLy8gICAgICAgICAgICAgdG9nZ2xlQWN0aW9uczpcInBsYXkgbm9uZSBub25lIG5vbmVcIixcbi8vICAgICAgICAgICAgIGFuaW1hdGlvbjp0bFxuLy8gICAgICAgICB9KVxuXG4vLyAgICAgfSlcbi8vICAgICAvLyAvL0ZsZXggVGFibGVcbi8vICAgICBsZXQgdGFibGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZsZXhfdGFibGVcIilcblxuLy8gICAgIHRhYmxlLmZvckVhY2goIChlbGVtZW50KSA9PiB7XG5cbi8vICAgICAgICAgbGV0IGhlYWRpbmdzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiaDJcIilcbi8vICAgICAgICAgbGV0IGNvcHkgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFibGUtY29udGVudFwiKVxuLy8gICAgICAgICBnc2FwLnNldChbaGVhZGluZ3MsIGNvcHldLFxuLy8gICAgICAgICB7b3BhY2l0eTogMCwgc2NhbGU6IDEsIHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnfSlcbi8vICAgICAgICAgZ3NhcC5zZXQoaGVhZGluZ3MsIHtzY2FsZTogMC45fSlcbi8vICAgICAgICAgZ3NhcC5zZXQoY29weSwge3k6IDUwfSlcblxuLy8gICAgICAgICBsZXQgdGwgPSBnc2FwLnRpbWVsaW5lKClcblxuLy8gICAgICAgICAudG8oaGVhZGluZ3MsIHtvcGFjaXR5OiAxLCBzY2FsZTogMSwgeTogMCwgdHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJSd9LCBcIi09MC4xXCIpXG4vLyAgICAgICAgIC50byhjb3B5LCB7b3BhY2l0eTogMSwgc2NhbGU6IDEsIHk6IDAsIHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnfSwgXCItPTAuM1wiKVxuXG4vLyAgICAgICAgIFNjcm9sbFRyaWdnZXIuY3JlYXRlKHtcbi8vICAgICAgICAgICAgIHRyaWdnZXI6ZWxlbWVudCxcbi8vICAgICAgICAgICAgIHN0YXJ0OlwidG9wIDkwJVwiLFxuLy8gICAgICAgICAgICAgdG9nZ2xlQWN0aW9uczpcInBsYXkgbm9uZSBub25lIG5vbmVcIixcbi8vICAgICAgICAgICAgIGFuaW1hdGlvbjp0bFxuLy8gICAgICAgICB9KVxuXG4vLyAgICAgfSlcblxuXG4vLyAgICAgLy93eXNpd3lnXG4vLyAgICAgbGV0IHd5c2l3eWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZsZXhfYmFzaWMtd3lzaXd5Z1wiKVxuXG4vLyAgICAgd3lzaXd5Zy5mb3JFYWNoKCAoZWxlbWVudCkgPT4ge1xuXG4vLyAgICAgXHRsZXQgaGVhZGluZ3MgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJoMlwiKVxuLy8gICAgICAgICBsZXQgY29weSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb3B5XCIpXG5cbi8vICAgICBcdGxldCB0bCA9IGdzYXAudGltZWxpbmUoKVxuXG4vLyAgICAgXHQgLmZyb20oaGVhZGluZ3MsIHt5OjEwMCwgb3BhY2l0eTowfSwgMClcbi8vICAgICAgICAgIC5mcm9tKGNvcHksIHt5OjEwMCwgb3BhY2l0eTowLCBzdGFnZ2VyOjAuMTV9LCBcIi09MC4xXCIpXG5cbi8vICAgICBcdFNjcm9sbFRyaWdnZXIuY3JlYXRlKHtcbi8vICAgICBcdFx0dHJpZ2dlcjplbGVtZW50LFxuLy8gICAgIFx0XHRzdGFydDpcInRvcCA5MCVcIixcbi8vICAgICBcdFx0dG9nZ2xlQWN0aW9uczpcInBsYXkgbm9uZSBub25lIHJldmVyc2VcIixcbi8vICAgICBcdFx0YW5pbWF0aW9uOnRsXG4vLyAgICAgXHR9KVxuXG4vLyAgICAgfSlcbi8vICAgICBsZXQgd3lzaXd5Z0NvbHVtbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZsZXhfYmFzaWMtd3lzaXd5ZyAuY29sdW1uLWNvbnRlbnRcIilcblxuLy8gICAgIHd5c2l3eWdDb2x1bW5zLmZvckVhY2goIChlbGVtZW50KSA9PiB7XG5cbi8vICAgICBcdGxldCBjb250ZW50TGVmdCA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jb3B5LWxlZnRcIilcbi8vICAgICAgICAgbGV0IGNvbnRlbnRSaWdodCA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb3B5LXJpZ2h0XCIpXG5cbi8vICAgICBcdGxldCB0bCA9IGdzYXAudGltZWxpbmUoKVxuXG4vLyAgICAgXHQgLmZyb20oY29udGVudExlZnQsIHt5OjEwMCwgb3BhY2l0eTowfSwgMClcbi8vICAgICAgICAgIC5mcm9tKGNvbnRlbnRSaWdodCwge3k6MTAwLCBvcGFjaXR5OjAsIHN0YWdnZXI6MC4xNX0sIFwiLT0wLjFcIilcblxuLy8gICAgIFx0U2Nyb2xsVHJpZ2dlci5jcmVhdGUoe1xuLy8gICAgIFx0XHR0cmlnZ2VyOmVsZW1lbnQsXG4vLyAgICAgXHRcdHN0YXJ0OlwidG9wIDkwJVwiLFxuLy8gICAgIFx0XHR0b2dnbGVBY3Rpb25zOlwicGxheSBub25lIG5vbmUgbm9uZVwiLFxuLy8gICAgIFx0XHRhbmltYXRpb246dGxcbi8vICAgICBcdH0pXG5cbi8vICAgICB9KVxuXG5cbi8vICAgICAvLyAvL0FjY29yZGlvbnNcbi8vICAgICAvLyAvL2FjY29yZGlvbiB0aXRsZXNcbi8vICAgICAvL2NhcmQgU2VjdGlvbnNcbi8vICAgICBsZXQgZXhwYW5kQ29sbGFwc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZsZXhfZXhwYW5kLWNvbGxhcHNlXCIpXG4vLyAgICAgICAgIGV4cGFuZENvbGxhcHNlLmZvckVhY2goIChlbGVtZW50KSA9PiB7XG5cbi8vICAgICAgICAgICAgIGxldCBoZWFkaW5ncyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcImgyXCIpXG4vLyAgICAgICAgICAgICBsZXQgY29weSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb3B5XCIpXG5cblxuLy8gICAgICAgICBnc2FwLnNldChbaGVhZGluZ3MsIGNvcHldLHtvcGFjaXR5OiAwLCBzY2FsZTogMSwgeTo1MCwgdHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJSd9KVxuXG4vLyAgICAgICAgIGxldCB0bCA9IGdzYXAudGltZWxpbmUoKVxuXG4vLyAgICAgICAgIC50byhoZWFkaW5ncywge29wYWNpdHk6IDEsIHNjYWxlOiAxLCB5OiAwLCB0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJ30sIDApXG4vLyAgICAgICAgIC50byhjb3B5LCB7b3BhY2l0eTogMSwgc2NhbGU6IDEsIHk6IDAsIHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnfSwgXCItPTAuMVwiKVxuXG4vLyAgICAgICAgIFNjcm9sbFRyaWdnZXIuY3JlYXRlKHtcbi8vICAgICAgICAgICAgdHJpZ2dlcjplbGVtZW50LFxuLy8gICAgICAgICAgICBzdGFydDpcInRvcCA5MCVcIixcbi8vICAgICAgICAgICAgdG9nZ2xlQWN0aW9uczpcInBsYXkgbm9uZSBub25lIG5vbmVcIixcbi8vICAgICAgICAgICAgYW5pbWF0aW9uOnRsXG4vLyAgICAgICAgIH0pXG5cbi8vICAgICB9KVxuXG5cblxuXG4vLyAgICAgLy8gLy9Gb3JtIEJsb2NrXG4vLyAgICAgbGV0IGZvcm1CbG9jayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybS1jb250ZW50XCIpXG5cbi8vICAgICBmb3JtQmxvY2suZm9yRWFjaCggKGVsZW1lbnQpID0+IHtcblxuLy8gICAgICAgICBsZXQgaGVhZGVyID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiaDJcIilcbi8vICAgICAgICAgbGV0IGNvcHkgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJwXCIpXG4vLyAgICAgICAgIGxldCBmb3JtID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtJyk7XG5cbi8vICAgICAgICAgZ3NhcC5zZXQoW2hlYWRlciwgY29weSwgZm9ybV0sXG4vLyAgICAgICAgIHtvcGFjaXR5OiAwLCBzY2FsZTogMSwgdHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJSd9KVxuLy8gICAgICAgICBnc2FwLnNldChoZWFkZXIsIHt5OjEwMCwgc2NhbGU6IDAuOX0pXG4vLyAgICAgICAgIGdzYXAuc2V0KGNvcHksIHt5OiA1MH0pXG5cbi8vICAgICAgICAgbGV0IHRsID0gZ3NhcC50aW1lbGluZSgpXG5cbi8vICAgICAgICAgLnRvKGhlYWRlciwge29wYWNpdHk6IDEsIHNjYWxlOiAxLCB5OiAwLCBzdGFnZ2VyOjAuMTUsIHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnfSwgMClcbi8vICAgICAgICAgLnRvKGNvcHksIHtvcGFjaXR5OiAxLCBzY2FsZTogMSwgeTogMCwgdHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJSd9LCBcIi09MC4zXCIpXG4vLyAgICAgICAgIC50byhmb3JtLCB7b3BhY2l0eTogMSwgc2NhbGU6IDEsIHk6IDAsIHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnfSwgXCItPTAuNVwiKVxuXG4vLyAgICAgICAgIFNjcm9sbFRyaWdnZXIuY3JlYXRlKHtcbi8vICAgICAgICAgICAgIHRyaWdnZXI6ZWxlbWVudCxcbi8vICAgICAgICAgICAgIHN0YXJ0OlwidG9wIDkwJVwiLFxuLy8gICAgICAgICAgICAgdG9nZ2xlQWN0aW9uczpcInBsYXkgbm9uZSBub25lIG5vbmVcIixcbi8vICAgICAgICAgICAgIGFuaW1hdGlvbjp0bFxuLy8gICAgIFx0fSlcbi8vICAgICB9KVxuXG4vLyAgICAgLy8gLy9Db250YWN0IFN0dWZmXG4vLyAgICAgLy8gLy9QaG9uZSB0aXRsZXNcbi8vICAgICBsZXQgY29udGFjdFBob25lSGVhZGVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29udGFjdC11cyAucGhvbmUtZGV0YWlsc1wiKVxuLy8gICAgIGNvbnRhY3RQaG9uZUhlYWRlcnMuZm9yRWFjaCggKGVsZW1lbnQpID0+IHtcblxuLy8gICAgICAgIGxldCBoZWFkaW5ncyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcImgzXCIpXG4vLyAgICAgICAgIGxldCBjb3B5ID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvcHlcIilcblxuLy8gICAgICAgIGxldCB0bCA9IGdzYXAudGltZWxpbmUoKVxuXG4vLyAgICAgICAgIC5mcm9tKGhlYWRpbmdzLCB7eToxMDAsIG9wYWNpdHk6MH0sIDApXG4vLyAgICAgICAgICAuZnJvbShjb3B5LCB7eToxMDAsIG9wYWNpdHk6MCwgc3RhZ2dlcjowLjE1fSwgXCItPTAuMVwiKVxuXG4vLyAgICAgICAgU2Nyb2xsVHJpZ2dlci5jcmVhdGUoe1xuLy8gICAgICAgICAgICB0cmlnZ2VyOmVsZW1lbnQsXG4vLyAgICAgICAgICAgIHN0YXJ0OlwidG9wIDkwJVwiLFxuLy8gICAgICAgICAgICB0b2dnbGVBY3Rpb25zOlwicGxheSBub25lIG5vbmUgbm9uZVwiLFxuLy8gICAgICAgICAgICBhbmltYXRpb246dGxcbi8vICAgICAgICB9KVxuXG4vLyAgICAgfSlcbi8vICAgICAvL3Bob25lIGl0ZW1zXG4vLyAgICAgbGV0IHBob25lSXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvbnRhY3QtdXMgLnBob25lLWRldGFpbHMgLnBob25lLXJvd1wiKVxuXG4vLyAgICAgcGhvbmVJdGVtcy5mb3JFYWNoKCAoZWxlbWVudCkgPT4ge1xuXG4vLyAgICAgICAgIGxldCBwaG9uZUxhYmVsID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmxhYmVsXCIpXG4vLyAgICAgICAgIGxldCBwaG9uZU51bWJlciA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5waG9uZS1udW1iZXJzXCIpXG5cbi8vICAgICAgICAgZ3NhcC5zZXQoW3Bob25lTGFiZWwsIHBob25lTnVtYmVyXSx7b3BhY2l0eTogMCwgc2NhbGU6IDEsIHk6NTAsIHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnfSlcblxuLy8gICAgICAgICBsZXQgdGwgPSBnc2FwLnRpbWVsaW5lKClcblxuLy8gICAgICAgICAudG8ocGhvbmVMYWJlbCwge29wYWNpdHk6IDEsIHNjYWxlOiAxLCB5OiAwLCB0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJ30sIFwiLT0wLjNcIilcbi8vICAgICAgICAgLnRvKHBob25lTnVtYmVyLCB7b3BhY2l0eTogMSwgc2NhbGU6IDEsIHk6IDAsIHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnfSwgXCItPTAuM1wiKVxuXG4vLyAgICAgICAgIFNjcm9sbFRyaWdnZXIuY3JlYXRlKHtcbi8vICAgICAgICAgICAgIHRyaWdnZXI6ZWxlbWVudCxcbi8vICAgICAgICAgICAgIHN0YXJ0OlwidG9wIDkwJVwiLFxuLy8gICAgICAgICAgICAgdG9nZ2xlQWN0aW9uczpcInBsYXkgbm9uZSBub25lIG5vbmVcIixcbi8vICAgICAgICAgICAgIGFuaW1hdGlvbjp0bFxuXG4vLyAgICAgICAgfSlcblxuLy8gICAgIH0pXG4vLyAgICAgLy8gLy9Db250YWN0IEZvcm1cbi8vICAgICBsZXQgY29udGFjdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvbnRhY3QtdXMgLmNvbnRhY3QtdXMtZm9ybVwiKVxuLy8gICAgICAgICBjb250YWN0Rm9ybS5mb3JFYWNoKCAoZWxlbWVudCkgPT4ge1xuXG4vLyAgICAgICAgIGxldCBoZWFkaW5ncyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcImgxLCBoMiwgaDMsIGg0LCBoNSwgaDZcIilcbi8vICAgICAgICAgbGV0IGNvcHkgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJwXCIpXG4vLyAgICAgICAgIGxldCBmb3JtID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtJyk7XG5cbi8vICAgICAgICAgZ3NhcC5zZXQoW2hlYWRpbmdzLCBjb3B5LCBmb3JtXSx7b3BhY2l0eTogMCwgc2NhbGU6IDEsIHk6NTAsIHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnfSlcblxuLy8gICAgICAgICBsZXQgdGwgPSBnc2FwLnRpbWVsaW5lKClcblxuLy8gICAgICAgICAudG8oaGVhZGluZ3MsIHtvcGFjaXR5OiAxLCBzY2FsZTogMSwgeTogMCwgdHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJSd9LCAwKVxuLy8gICAgICAgICAudG8oY29weSwge29wYWNpdHk6IDEsIHNjYWxlOiAxLCB5OiAwLCB0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJ30sIFwiLT0wLjFcIilcbi8vICAgICAgICAgLnRvKGZvcm0sIHtvcGFjaXR5OiAxLCBzY2FsZTogMSwgeTogMCwgdHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJSd9LCBcIi09MC4zXCIpXG5cbi8vICAgICAgICAgU2Nyb2xsVHJpZ2dlci5jcmVhdGUoe1xuLy8gICAgICAgICAgICB0cmlnZ2VyOmVsZW1lbnQsXG4vLyAgICAgICAgICAgIHN0YXJ0OlwidG9wIDkwJVwiLFxuLy8gICAgICAgICAgICB0b2dnbGVBY3Rpb25zOlwicGxheSBub25lIG5vbmUgbm9uZVwiLFxuLy8gICAgICAgICAgICBhbmltYXRpb246dGxcbi8vICAgICAgICAgfSlcblxuLy8gICAgIH0pXG5cbi8vICAgICAvL0FMTCBST0xMIE9VVCBBTklNQVRJT05TXG4vLyAgICAgLy9UaGlzIG1lYW5zIHRoYXQgaXQgaXMgcmV2ZWFsZWQgYXMgeW91IHNjcm9sbCB0aHJvdWdoIHRoZSBhcmVhIHZzIGFzIHlvdSBoaXQgYSB0cmlnZ2VyXG4vLyAgICAgLy9JdCBoYXMgRVZFTlRTLCBSRVNPVVJDRVMsIEJMT0dTLCBTSURFQkFSIElURU1TLCBESVJFQ1RPUlksIFNFQVJDSCBSRVNVTFRTLCBhbmQgVEFCTEVQUkVTUyBUQUJMRVNcbi8vICAgICAkKCcuZXZlbnQtbGlzdCwgLnJlc291cmNlLWxpc3RfdGFibGUsIC5ibG9nLWxpc3RfbWFpbiwgLmxlZnQtc2lkZWJhci1tZW51IC5jaGlsZC1tZW51LCAuZmxleF90YWJsZSwgLmVtcGxveWVlLWxpc3QgLmNvbnRhaW5lciwgLnNlYXJjaC1yZXN1bHRzIC5yZXN1bHRzJykuZWFjaChmdW5jdGlvbigpe1xuXG4vLyAgICAgICAgIGdzYXAudXRpbHMudG9BcnJheSgnLmV2ZW50LWxpc3QsIC5yZXNvdXJjZS1saXN0X3RhYmxlLCAuYmxvZy1saXN0X21haW4sIC5jaGlsZC1tZW51LCAudGFibGVwcmVzcywgLmVtcGxveWVlLWxpc3QgLmNvbnRhaW5lciwgLnNlYXJjaC1yZXN1bHRzIC5yZXN1bHRzJykuZm9yRWFjaCgoc2VjLCBpKSA9PiB7XG4vLyAgICAgICAgICAgZ3NhcC5zZXQoJy5ldmVudC1saXN0X19ldmVudCwgLnJlc291cmNlLWxpc3RfaXRlbSwgLmJsb2ctaXRlbSwgLmNoaWxkLW1lbnUgLnBhZ2VfaXRlbSwgdHIsIC5lbXBsb3llZS1pdGVtLCBhcnRpY2xlJywge29wYWNpdHk6IDAsIHk6IC0xMDAsfSksXG5cbi8vICAgICAgICAgICBTY3JvbGxUcmlnZ2VyLmJhdGNoKFwiLmV2ZW50LWxpc3RfX2V2ZW50LCAucmVzb3VyY2UtbGlzdF9pdGVtLCAuYmxvZy1pdGVtLCAuY2hpbGQtbWVudSAucGFnZV9pdGVtLCB0ciwgLmVtcGxveWVlLWl0ZW0sIGFydGljbGVcIiwge1xuLy8gICAgICAgICAgICAgb25FbnRlcjogYmF0Y2ggPT4gZ3NhcC50byhiYXRjaCwge29wYWNpdHk6IDEsIHk6IDAsIHN0YWdnZXI6IHtlYWNoOiAwLjE1LCBncmlkOiBbMSwgMl19LCBvdmVyd3JpdGU6IHRydWV9KVxuLy8gICAgICAgICAgIH0pO1xuLy8gICAgICAgICB9KTtcbi8vICAgICB9KTtcbi8vICAgICAvL0FjY29yZGlvblxuLy8gICAgICQoJy5mbGV4X2V4cGFuZC1jb2xsYXBzZScpLmVhY2goZnVuY3Rpb24oKXtcblxuLy8gICAgICAgICBnc2FwLnV0aWxzLnRvQXJyYXkoJy5mbGV4X2V4cGFuZC1jb2xsYXBzZScpLmZvckVhY2goKHNlYywgaSkgPT4ge1xuLy8gICAgICAgICAgIGdzYXAuc2V0KCcuY29sbGFwc2UtdG9nZ2xlJywge29wYWNpdHk6IDAsIHk6IC0xMDAsfSksXG5cbi8vICAgICAgICAgICBTY3JvbGxUcmlnZ2VyLmJhdGNoKFwiLmNvbGxhcHNlLXRvZ2dsZVwiLCB7XG4vLyAgICAgICAgICAgICBvbkVudGVyOiBiYXRjaCA9PiBnc2FwLnRvKGJhdGNoLCB7b3BhY2l0eTogMSwgeTogMCwgc3RhZ2dlcjoge2VhY2g6IDAuMTUsIGdyaWQ6IFsxLCAxXX0sIG92ZXJ3cml0ZTogdHJ1ZX0pXG4vLyAgICAgICAgICAgfSk7XG4vLyAgICAgICAgIH0pO1xuLy8gICAgIH0pO1xuXG4vLyAgICAgLy9jYXJkIFNlY3Rpb25zXG4vLyAgICAgbGV0IGZsZXhDYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZmxleF9pbWFnZS1jYXJkcywgLmZsZXhfY29udGVudC1jYXJkcywgLmVycm9yNDA0LCBmbGV4X3Byb2dyYW0tY2FyZHNcIilcbi8vICAgICAgICAgZmxleENhcmRzLmZvckVhY2goIChlbGVtZW50KSA9PiB7XG5cbi8vICAgICAgICAgbGV0IGhlYWRlciA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcImgyXCIpXG4vLyAgICAgICAgIGxldCBjb250ZW50ID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdwLCAuY29weSAucGFnZS1pbmZvJylcbi8vICAgICAgICAgbGV0IGNhcmRzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaW1hZ2UtY2FyZHMgLmltYWdlLWNhcmRzX2l0ZW0sIC5jb250ZW50LWNhcmRzIC5jb250ZW50LWNhcmRzX2l0ZW0sIC5wcm9ncmFtLWNhcmRzX3dyYXAgLnByb2dyYW0nKVxuXG5cbi8vICAgICAgICAgZ3NhcC5zZXQoW2hlYWRlciwgY29udGVudCwgY2FyZHNdLHtvcGFjaXR5OiAwLCBzY2FsZTogMSwgeTo1MCwgdHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJSd9KVxuXG4vLyAgICAgICAgIGxldCB0bCA9IGdzYXAudGltZWxpbmUoKVxuXG4vLyAgICAgICAgIC50byhoZWFkZXIsIHtvcGFjaXR5OiAxLCBzY2FsZTogMSwgeTogMCwgdHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJSd9LCAwKVxuLy8gICAgICAgICAudG8oY29udGVudCwge29wYWNpdHk6IDEsIHNjYWxlOiAxLCB5OiAwLCB0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJ30sIFwiLT0wLjFcIilcbi8vICAgICAgICAgLnRvKGNhcmRzLCB7b3BhY2l0eTogMSwgc2NhbGU6IDEsIHk6IDAsIHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnLCBzdGFnZ2VyOjAuMn0sIFwiLT0wLjNcIilcblxuLy8gICAgICAgICBTY3JvbGxUcmlnZ2VyLmNyZWF0ZSh7XG4vLyAgICAgICAgICAgIHRyaWdnZXI6ZWxlbWVudCxcbi8vICAgICAgICAgICAgc3RhcnQ6XCJ0b3AgOTAlXCIsXG4vLyAgICAgICAgICAgIHRvZ2dsZUFjdGlvbnM6XCJwbGF5IG5vbmUgbm9uZSBub25lXCIsXG4vLyAgICAgICAgICAgIGFuaW1hdGlvbjp0bFxuLy8gICAgICAgICB9KVxuXG4vLyAgICAgfSlcblxuLy8gICAgIC8vQmxvZyBTaW5nbGUgcmVsYXRlZFxuLy8gICAgIGxldCBibG9nUmVsYXRlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2luZ2xlLWJsb2dcIilcbi8vICAgICAgICAgYmxvZ1JlbGF0ZWQuZm9yRWFjaCggKGVsZW1lbnQpID0+IHtcblxuLy8gICAgICAgICBsZXQgaGVhZGVyID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNpbmdsZS1ibG9nX3JlbGF0ZWQtYmxvZ3MgaDJcIilcbi8vICAgICAgICAgbGV0IGJ1dHRvbiA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNpbmdsZS1ibG9nX3JlbGF0ZWQtYmxvZ3MgLmJ1dHRvbicpXG4vLyAgICAgICAgIGxldCBjYXJkcyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNpbmdsZS1ibG9nX3JlbGF0ZWQtYmxvZ3MgLmNhcmQnKVxuXG5cbi8vICAgICAgICAgZ3NhcC5zZXQoW2hlYWRlciwgYnV0dG9uLCBjYXJkc10se29wYWNpdHk6IDAsIHNjYWxlOiAxLCB5OjUwLCB0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJ30pXG5cbi8vICAgICAgICAgbGV0IHRsID0gZ3NhcC50aW1lbGluZSgpXG5cbi8vICAgICAgICAgLnRvKGhlYWRlciwge29wYWNpdHk6IDEsIHNjYWxlOiAxLCB5OiAwLCB0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJ30sIDApXG4vLyAgICAgICAgIC50byhidXR0b24sIHtvcGFjaXR5OiAxLCBzY2FsZTogMSwgeTogMCwgdHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJSd9LCBcIi09MC4xXCIpXG4vLyAgICAgICAgIC50byhjYXJkcywge29wYWNpdHk6IDEsIHNjYWxlOiAxLCB5OiAwLCB0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJywgc3RhZ2dlcjowLjE1fSwgXCItPTAuM1wiKVxuXG4vLyAgICAgICAgIFNjcm9sbFRyaWdnZXIuY3JlYXRlKHtcbi8vICAgICAgICAgICAgdHJpZ2dlcjplbGVtZW50LFxuLy8gICAgICAgICAgICBzdGFydDpcInRvcCA5MCVcIixcbi8vICAgICAgICAgICAgdG9nZ2xlQWN0aW9uczpcInBsYXkgbm9uZSBub25lIG5vbmVcIixcbi8vICAgICAgICAgICAgYW5pbWF0aW9uOnRsXG4vLyAgICAgICAgIH0pXG5cbi8vICAgICB9KVxuXG5cbi8vIH0pO1xuIiwialF1ZXJ5KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigkKSB7XG5cbiAgICAvLyBpbml0IGNvbnRyb2xsZXJcbiAgICB2YXIgcG9zaXRpb24gPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XG5cbiAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCkge1xuICAgICAgaWYoJCh3aW5kb3cpLndpZHRoKCkgPiAxMDI0KXtcbiAgICAgICAgdmFyIHNjcm9sbCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcbiAgICAgICAgaWYoc2Nyb2xsID4gcG9zaXRpb24gJiYgc2Nyb2xsIDwgMTAwKSB7XG4gICAgICAgICAgJCgnLnNpdGUtbmV3aGVhZGVyJykuYWRkQ2xhc3MoJ29uLXNjcm9sbC1kb3duJyk7XG4gICAgICAgICAgJCgnLnNpdGUtbmV3aGVhZGVyJykucmVtb3ZlQ2xhc3MoJ29uLXNjcm9sbC11cCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkKCcuc2l0ZS1uZXdoZWFkZXInKS5yZW1vdmVDbGFzcygnb24tc2Nyb2xsLWRvd24nKTtcbiAgICAgICAgICAkKCcuc2l0ZS1uZXdoZWFkZXInKS5hZGRDbGFzcygnb24tc2Nyb2xsLXVwJyk7XG4gICAgICAgICAgJCgnLnNpdGUtbmV3aGVhZGVyJykucmVtb3ZlQ2xhc3MoJ29uLXBpbicpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoc2Nyb2xsIDwgMTAwKSB7XG4gICAgICAgICAgJCgnLnNpdGUtbmV3aGVhZGVyJykucmVtb3ZlQ2xhc3MoJ29uLXNjcm9sbC1kb3duJyk7XG4gICAgICAgICAgJCgnLnNpdGUtbmV3aGVhZGVyJykucmVtb3ZlQ2xhc3MoJ29uLXNjcm9sbC11cCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoc2Nyb2xsID4gcG9zaXRpb24gJiYgc2Nyb2xsID4gNjAwKSB7XG4gICAgICAgICAgJCgnLnNpdGUtbmV3aGVhZGVyJykuYWRkQ2xhc3MoJ29uLXBpbicpO1xuICAgICAgICB9XG4gICAgICAgIGlmKCQoJyN0b29sYmFyLWFkbWluaXN0cmF0aW9uJykubGVuZ3RoID09PSAwKXtcbiAgICAgICAgICAkKCcuc2l0ZS1uZXdoZWFkZXInKS5hZGRDbGFzcygnYW5vbnltb3VzLXVzZXInKTtcbiAgICAgICAgfVxuICAgICAgICBwb3NpdGlvbiA9IHNjcm9sbDtcblxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gLy8gQWRkIGNsYXNzIHRvIHN1Ym1lbnUgdG8gaGVscCB3aXRoIGNvbHVtbiB3cmFwcGluZ1xuICAgIC8vICQoXCJ1bCNwcmltYXJ5LW1lbnUgPiBsaS5tZW51LWl0ZW0taGFzLWNoaWxkcmVuIC5tZWdhLW1lbnUgPiB1bC5zdWItbWVudSA+IGxpLm1lbnUtaXRlbS1oYXMtY2hpbGRyZW5cIikucGFyZW50KCkuYWRkQ2xhc3MoJ2ZsZXgtbGF5b3V0Jyk7XG5cblxuICAgIC8vIC8vIEV4cGFuZGFibGUgU2VhcmNoIEZ1bmN0aW9uYWxpdHlcblxuICAgIC8vIC8vIFNlYXJjaCBUb2dnbGVcbiAgICAvLyAkKCcuc2VhcmNoZm9ybSAuc2VhcmNoLWZpZWxkJykuYXR0cigncGxhY2Vob2xkZXInLCAnU2VhcmNoIGJ5IGtleXdvcmQuLi4nKTtcbiAgICAvLyAkKCcuc2VhcmNoZm9ybSAuc2VhcmNoLXN1Ym1pdCcpLnZhbCgn74CCJyk7XG5cbiAgICAvLyAkKFwiLnNlYXJjaF9pY29uXCIpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgIC8vICAgICQodGhpcykubmV4dChcIi5zZWFyY2hmb3JtXCIpLmFuaW1hdGUoeyd3aWR0aCc6ICd0b2dnbGUnfSk7XG4gICAgLy8gICAgJCh0aGlzKS50b2dnbGVDbGFzcygnb3BlbicpO1xuXG4gICAgLy8gICAgaWYgKCAkKHRoaXMpLmhhc0NsYXNzKCBcIm9wZW5cIiApICkge1xuICAgIC8vICAgICAgJCh0aGlzKS5maW5kKCdpJykuYXR0cignY2xhc3MnLCdmYWwgZmEtdGltZXMnKTtcbiAgICAvLyAgICAgICQodGhpcykubmV4dCgnLnNlYXJjaGZvcm0gLnNlYXJjaC1zdWJtaXQnKS5zaG93KCk7XG4gICAgLy8gICAgfSBlbHNlIHtcbiAgICAvLyAgICAgJCh0aGlzKS5maW5kKCdpJykuYXR0cignY2xhc3MnLCdmYWwgZmEtc2VhcmNoJyk7XG4gICAgLy8gICAgICAgJCh0aGlzKS5uZXh0KCcuc2VhcmNoZm9ybSAuc2VhcmNoLXN1Ym1pdCcpLmhpZGUoKTtcbiAgICAvLyAgICAgICAkKHRoaXMpLm5leHQoJy5zZWFyY2hmb3JtIC5zZWFyY2gtZmllbGQnKS52YWwoJycpO1xuICAgIC8vICAgIH1cbiAgICAvLyB9KTtcblxuICAgICAgLy9TZWFyY2ggSlNcbiAgICAgIC8vICQoZG9jdW1lbnQpLmtleWRvd24oZnVuY3Rpb24oZSkge1xuICAgICAgLy8gICBpZiAoZS5rZXlDb2RlID09IDI3KSB7XG4gICAgICAvLyAgICAgJChcIi5zZWFyY2hmb3JtXCIpLmhpZGUoKTtcbiAgICAgIC8vICAgICAkKCcuc2VhcmNoX2ljb24nKS5yZW1vdmVDbGFzcygnb3BlbicpO1xuICAgICAgLy8gICAgICQoJy5zZWFyY2hfaWNvbiBpJykuYXR0cignY2xhc3MnLCdmYWwgZmEtc2VhcmNoJyk7XG4gICAgICAvLyAgICAgJCgnLnNlYXJjaGZvcm0gLnNlYXJjaC1maWVsZCcpLnZhbCgnJyk7XG4gICAgICAvLyAgIH1cbiAgICAgIC8vIH0pO1xuXG5cbiAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgICAqIE1vYmlsZSBNZW51IFN0dWZmICpcbiAgICAgICogV2UgYXJlIHVzaW5nIHNpZHIgdG8gaGFuZGxlIG91ciBtZW51IEpTICpcbiAgICAgICogaHR0cHM6Ly93d3cuYmVycmlhcnQuY29tL3NpZHIvICpcbiAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgICAvLyAgIHZhciBzaWRyTmFtZSA9IFwic2lkci1tYWluXCI7XG5cbiAgICAvLyAgICQoXCIubW9iaWxlLW5hdmlnYXRpb25cIikuc2lkcih7XG4gICAgLy8gICAgICBuYW1lOiBzaWRyTmFtZSxcbiAgICAvLyAgICAgIHNpZGU6IFwicmlnaHRcIixcbiAgICAvLyAgICAgIHNvdXJjZTogXCIuc2VhcmNoLm1vYmlsZSwgLm1haW4tbmF2aWdhdGlvbiwgLm1lbnUtbW9iaWxlLWJ1dHRvbnMtY29udGFpbmVyLCAubWVudS11c2VyLXJvbGVzLW1lbnUtY29udGFpbmVyLCAubWVudS11dGlsaXR5LW1lbnUtY29udGFpbmVyXCIsXG4gICAgLy8gICAgICByZW5hbWluZzogZmFsc2UsXG4gICAgLy8gICAgICBvbk9wZW46IGZ1bmN0aW9uKCkge1xuICAgIC8vICAgICAgICAgICQod2luZG93KS5vbihcImNsaWNrLnNpZHJcIiwgZnVuY3Rpb24oZSkge1xuICAgIC8vICAgICAgICAgICAgICAkLnNpZHIoXCJjbG9zZVwiLCBzaWRyTmFtZSk7XG4gICAgLy8gICAgICAgICAgfSk7XG5cbiAgICAvLyAgICAgICAgICAkKFwiI21vYmlsZS1tZW51LXRvZ2dsZVwiKS5hZGRDbGFzcyhcIm1lbnUtb3BlblwiKTtcbiAgICAvLyAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwibW9iaWxlLW1lbnUtb3ZlcmxheVwiPjwvZGl2PicpO1xuICAgIC8vICAgICAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygnbG9jay1zY3JvbGwnKTtcbiAgICAvLyAgICAgICAgICAkKCcuc2lkcicpLnByZXBlbmQoJzxidXR0b24gY2xhc3M9XCJjbG9zZSBtb2JpbGUgbWVudVwiIGFyaWEtbGFiZWw9XCJDbG9zZSBtb2JpbGUgbWVudVwiPjxpIGNsYXNzPVwiZmFsIGZhLXRpbWVzXCI+PC9pPjwvYnV0dG9uPicpO1xuICAgIC8vICAgICAgICAgICQoJy5zaWRyIC5jbG9zZScpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgIC8vICAgICAgICAgICAgICAkLnNpZHIoXCJjbG9zZVwiLCBzaWRyTmFtZSk7XG4gICAgLy8gICAgICAgICAgfSlcbiAgICAvLyAgICAgIH0sXG4gICAgLy8gICAgICBvbkNsb3NlOiBmdW5jdGlvbigpIHtcbiAgICAvLyAgICAgICAgICAkKHdpbmRvdykub2ZmKFwiY2xpY2suc2lkclwiKTtcbiAgICAvLyAgICAgICAgICAkKFwiI21vYmlsZS1tZW51LXRvZ2dsZVwiKS5yZW1vdmVDbGFzcyhcIm1lbnUtb3BlblwiKTtcbiAgICAvLyAgICAgICAgICAkKCcubW9iaWxlLW1lbnUtb3ZlcmxheScpLnJlbW92ZSgpO1xuICAgIC8vICAgICAgICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnbG9jay1zY3JvbGwnKTtcbiAgICAvLyAgICAgICAgICAkKCcuc2lkciAuY2xvc2UnKS5yZW1vdmUoKTtcbiAgICAvLyAgICAgIH1cbiAgICAvLyAgfSk7XG5cbiAgICAgLy8gRG9uJ3QgeW91IGRhcmUgY2xvc2UgbWUgb3V0IVxuICAgIC8vICAkKFwiI1wiICsgc2lkck5hbWUpLm9uKFwiY2xpY2suc2lkclwiLCBmdW5jdGlvbihlKSB7XG4gICAgLy8gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIC8vICB9KTtcblxuICAgIC8vICAkKFwiLnNpZHIgI3ByaW1hcnktbWVudSA+Lm1lbnUtaXRlbS1oYXMtY2hpbGRyZW5cIikuYXBwZW5kKCc8aSBjbGFzcz1cImZhcyBmYS1jYXJldC1kb3duXCI+PC9pPicpO1xuXG5cbiAgICAvLyAgJChcIi5zaWRyICNwcmltYXJ5LW1lbnUgPiBsaS5tZW51LWl0ZW0taGFzLWNoaWxkcmVuID4gYVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAvLyAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAvLyAgICAgICQodGhpcykucGFyZW50KCkudG9nZ2xlQ2xhc3MoJ29wZW4nKTtcblxuICAgIC8vICAgICAgdmFyIHBhcmVudCA9ICQodGhpcykucGFyZW50KCk7XG4gICAgLy8gICAgICBpZiAocGFyZW50LmNoaWxkcmVuKFwiLm1lZ2EtbWVudVwiKS5sZW5ndGggPiAwKSB7XG4gICAgLy8gICAgICAgICAgcGFyZW50LmNoaWxkcmVuKFwiLm1lZ2EtbWVudVwiKS5zbGlkZVRvZ2dsZSgpO1xuICAgIC8vICAgICAgfVxuICAgIC8vICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIC8vICB9KTtcblxuXG5cbiAgICAgLy9BbGVydCBhbmQgcG9wIHVwIFN0dWZmXG4gICAgLy8gdmFyIGFkbWluSGVpZ2h0ID0gJCgnI3dwYWRtaW5iYXInKS5vdXRlckhlaWdodCgpO1xuICAgIC8vIHZhciBoZWFkZXJIZWlnaHQgPSAkKCcuc2l0ZS1uZXdoZWFkZXInKS5vdXRlckhlaWdodCgpO1xuXG4gICAgLy8gJCgnLnNpdGUtbmV3aGVhZGVyJykuY3NzKCd0b3AnLCBhZG1pbkhlaWdodCk7XG4gICAgLy8gJCgnI3ByaW1hcnknKS5jc3MoJ21hcmdpbi10b3AnLGhlYWRlckhlaWdodCk7XG5cblxuXG4gICAgLy8gJCggd2luZG93ICkucmVzaXplKGZ1bmN0aW9uKCkge1xuICAgIC8vICAgdmFyIGFkbWluSGVpZ2h0MiA9ICQoJyN3cGFkbWluYmFyJykub3V0ZXJIZWlnaHQoKTtcbiAgICAvLyAgIHZhciBoZWFkZXJIZWlnaHQyID0gJCgnLnNpdGUtbmV3aGVhZGVyJykub3V0ZXJIZWlnaHQoKTtcbiAgICAvLyAgICQoJy5zaXRlLW5ld2hlYWRlcicpLmNzcygndG9wJywgYWRtaW5IZWlnaHQyKTtcbiAgICAvLyAgICQoJyNwcmltYXJ5JykuY3NzKCdtYXJnaW4tdG9wJyxoZWFkZXJIZWlnaHQyKTtcbiAgICAvLyB9KTtcblxuXG4gICAgLy8gJCgnLmNsb3NlLWFsZXJ0JykuY2xpY2soZnVuY3Rpb24oKXsgLy8gQ2xhc3MgZm9yIHRoZSBjbG9zZSBidXR0b25cbiAgICAvLyAgICAkKCcuYWxlcnQtYmFyJykuaGlkZSgpO1xuICAgIC8vICAgICQoJy5hbGVydC1iYXInKS5jc3MoJ29wYWNpdHknLCAnMCcpO1xuICAgIC8vICAgICQoJy5hbGVydC1iYXInKS5jc3MoJ2hlaWdodCcsICcwJyk7XG4gICAgLy8gICAgJCgnLnNpdGUtbmV3aGVhZGVyJykucmVtb3ZlQ2xhc3MoJ2hhcy1hbGVydCcpO1xuICAgIC8vICAgIHZhciBoZWFkZXJIZWlnaHQzID0gJCgnLnNpdGUtbmV3aGVhZGVyJykub3V0ZXJIZWlnaHQoKTtcbiAgICAvLyAgICAkKCcjcHJpbWFyeScpLmNzcygnbWFyZ2luLXRvcCcsaGVhZGVySGVpZ2h0Myk7XG5cbiAgICAvLyAgICAkLmNvb2tpZSgnYWxlcnQtYm94JywgJ2Nsb3NlZCcsIHsgZXhwaXJlczogMSwgcGF0aDogJy8nIH0pO1xuICAgIC8vIH0pO1xuXG5cbiAgICAvLyBpZiggJC5jb29raWUoJ2FsZXJ0LWJveCcpID09PSAnY2xvc2VkJyApe1xuICAgIC8vICAgJCgnLmFsZXJ0LWJhcicpLmhpZGUoKTtcbiAgICAvLyAgICQoJy5hbGVydC1iYXInKS5jc3MoJ29wYWNpdHknLCAnMCcpO1xuICAgIC8vICAgJCgnLmFsZXJ0LWJhcicpLmNzcygnaGVpZ2h0JywgJzAnKTtcbiAgICAvLyAgICQoJy5zaXRlLW5ld2hlYWRlcicpLnJlbW92ZUNsYXNzKCdoYXMtYWxlcnQnKTtcbiAgICAvLyAgIHZhciBoZWFkZXJIZWlnaHQ0ID0gJCgnLnNpdGUtbmV3aGVhZGVyJykub3V0ZXJIZWlnaHQoKTtcbiAgICAvLyAgICQoJyNwcmltYXJ5JykuY3NzKCdtYXJnaW4tdG9wJyxoZWFkZXJIZWlnaHQ0KTtcblxuICAgIC8vIH0gZWxzZSB7XG4gICAgLy8gICAkKCcuYWxlcnQtYmFyJykuc2hvdygpO1xuICAgIC8vICAgJCgnLmFsZXJ0LWJhcicpLmNzcygnZGlzcGxheScsICdmbGV4Jyk7XG4gICAgLy8gICAkKCcuYWxlcnQtYmFyJykuY3NzKCdvcGFjaXR5JywgJzEnKTtcbiAgICAvLyAgICQoJy5hbGVydC1iYXInKS5jc3MoJ2hlaWdodCcsICdhdXRvJyk7XG4gICAgLy8gICB2YXIgaGVhZGVySGVpZ2h0NSA9ICQoJy5zaXRlLW5ld2hlYWRlcicpLm91dGVySGVpZ2h0KCk7XG4gICAgLy8gICAkKCcjcHJpbWFyeScpLmNzcygnbWFyZ2luLXRvcCcsaGVhZGVySGVpZ2h0NSk7XG4gICAgLy8gfVxufSk7XG4iLCIvLyBqUXVlcnkoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCQpIHtcbi8vICAgICAvKipcbi8vICAgICAgKiBMZWZ0IFNpZGViYXIgTW9iaWxlIGRyb3Bkb3duXG4vLyAgICAgICovXG4vLyAgICAgZnVuY3Rpb24gdG9nZ2xlTWVudSgpIHtcbi8vICAgICAgICAgY29uc29sZS5sb2coJ2NsaWNrJyk7XG4vLyAgICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuLy8gICAgICAgICAkKFwiLm1haW4tY29udGVudC13cmFwcGVyX3NpZGViYXIgLnNpZGViYXItbWVudVwiKS5zbGlkZVRvZ2dsZSgpO1xuLy8gICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcbi8vICAgICAgICAgICAgICQoJy5tYWluLWNvbnRlbnQtd3JhcHBlcl9zaWRlYmFyIC5zaWRlYmFyLW1lbnUnKS5hdHRyKCdhcmlhLWhpZGRlbicsIGZhbHNlKTtcbi8vICAgICAgICAgfSBlbHNlIHtcbi8vICAgICAgICAgICAgICQoJy5tYWluLWNvbnRlbnQtd3JhcHBlcl9zaWRlYmFyJykuYXR0cignYXJpYS1oaWRkZW4nLCB0cnVlKTtcbi8vICAgICAgICAgfVxuLy8gICAgICAgICByZXR1cm4gZmFsc2U7XG4vLyAgICAgfVxuXG4vLyAgICAgLy8gJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpIHtcbi8vICAgICAvLyAgICAgaWYgKCQodGhpcykud2lkdGgoKSA+PSAxMDI0KSB7XG4vLyAgICAgLy8gICAgICAgICAkKCcubWFpbi1jb250ZW50LXdyYXBwZXJfc2lkZWJhciAuc2lkZWJhci1tZW51JykuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJyk7XG4vLyAgICAgLy8gICAgIH1cbi8vICAgICAvLyB9KTtcblxuLy8gICAgICQoJy5pbm5lci1wYWdlIC5tb2JpbGUtbWVudS10b2dnbGUnKS5vbignbW91c2Vkb3duIHRvdWNoc3RhcnQnLCB0b2dnbGVNZW51KTtcblxuLy8gICAgIC8qKlxuLy8gICAgICAqIFJpZ2h0IFNpZGViYXIgQW5jaG9yIExpbmtzXG4vLyAgICAgICovXG5cbi8vICAgICAvLyBBZGQgcmlnaHQgc2lkZWJhclxuLy8gICAgIGZ1bmN0aW9uIGFkZFRvU2lkZWJhcigpIHtcbi8vICAgICAgICAgY29uc3QgaGFzaCA9ICQobG9jYXRpb24pLmF0dHIoJ2hhc2gnKS5yZXBsYWNlKFwiI1wiLCBcIlwiKTtcbi8vICAgICAgICAgY29uc3QgY2xhc3NJRCA9ICQodGhpcykuYXR0cignaWQnKTtcbi8vICAgICAgICAgaWYgKGhhc2ggPT09IGNsYXNzSUQpIHtcbi8vICAgICAgICAgICAgICQoJy5yaWdodC1zaWRlYmFyJykuYXBwZW5kKCc8YSBjbGFzcz1cInNjcm9sbC1saW5rXCIgaHJlZj1cIiMnICsgY2xhc3NJRCArICdcIj4nICsgJCh0aGlzKS5odG1sKCkgKyAnPC9hPicpO1xuLy8gICAgICAgICB9IGVsc2Uge1xuLy8gICAgICAgICAgICAgJCgnLnJpZ2h0LXNpZGViYXInKS5hcHBlbmQoJzxhIGhyZWY9XCIjJyArIGNsYXNzSUQgKyAnXCIgY2xhc3M9XCJzY3JvbGwtbGlua1wiPicgKyAkKHRoaXMpLmh0bWwoKSArICc8L2E+Jyk7XG4vLyAgICAgICAgIH1cbi8vICAgICB9XG5cbi8vICAgICAvLyBSaWdodCBzaWRlYmFyIFNtb290aCBzY3JvbGxpbmdcbi8vICAgICBmdW5jdGlvbiBzY3JvbGxTbW9vdGgoZXZlbnQpIHtcblxuLy8gICAgICAgICAvLyBTbW9vdGggU2Nyb2xsaW5nIGZvciByaWdodCBzaWRlYmFyIGFuY2hvcnNcbi8vICAgICAgICAgLy8gUmVmZXJlbmNlOiBodHRwczovL2Nzcy10cmlja3MuY29tL3NuaXBwZXRzL2pxdWVyeS9zbW9vdGgtc2Nyb2xsaW5nL1xuLy8gICAgICAgICBpZiAobG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgvXlxcLy8sICcnKSA9PSB0aGlzLnBhdGhuYW1lLnJlcGxhY2UoL15cXC8vLCAnJykgJiYgbG9jYXRpb24uaG9zdG5hbWUgPT0gdGhpcy5ob3N0bmFtZSkge1xuLy8gICAgICAgICAgICAgLy8gRmlndXJlIG91dCBlbGVtZW50IHRvIHNjcm9sbCB0b1xuLy8gICAgICAgICAgICAgbGV0IHRhcmdldCA9ICQodGhpcy5oYXNoKTtcbi8vICAgICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5sZW5ndGggPyB0YXJnZXQgOiAkKCdbbmFtZT0nICsgdGhpcy5oYXNoLnNsaWNlKDEpICsgJ10nKTtcbi8vICAgICAgICAgICAgIC8vIERvZXMgYSBzY3JvbGwgdGFyZ2V0IGV4aXN0P1xuLy8gICAgICAgICAgICAgaWYgKHRhcmdldC5sZW5ndGgpIHtcbi8vICAgICAgICAgICAgICAgICAvLyBPbmx5IHByZXZlbnQgZGVmYXVsdCBpZiBhbmltYXRpb24gaXMgYWN0dWFsbHkgZ29ubmEgaGFwcGVuXG4vLyAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbi8vICAgICAgICAgICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG4vLyAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogdGFyZ2V0Lm9mZnNldCgpLnRvcCAtIDE1MFxuLy8gICAgICAgICAgICAgICAgIH0sIDEwMDAsIGZ1bmN0aW9uKCkge1xuLy8gICAgICAgICAgICAgICAgICAgICAvLyBDYWxsYmFjayBhZnRlciBhbmltYXRpb25cbi8vICAgICAgICAgICAgICAgICAgICAgLy8gTXVzdCBjaGFuZ2UgZm9jdXMhXG4vLyAgICAgICAgICAgICAgICAgICAgIHZhciAkdGFyZ2V0ID0gJCh0YXJnZXQpO1xuLy8gICAgICAgICAgICAgICAgICAgICAkdGFyZ2V0LmZvY3VzKCk7XG4vLyAgICAgICAgICAgICAgICAgICAgIGlmICgkdGFyZ2V0LmlzKFwiOmZvY3VzXCIpKSB7IC8vIENoZWNraW5nIGlmIHRoZSB0YXJnZXQgd2FzIGZvY3VzZWRcbi8vICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbi8vICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICR0YXJnZXQuYXR0cigndGFiaW5kZXgnLCctMScpOyAvLyBBZGRpbmcgdGFiaW5kZXggZm9yIGVsZW1lbnRzIG5vdCBmb2N1c2FibGVcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICR0YXJnZXQuZm9jdXMoKTsgLy8gU2V0IGZvY3VzIGFnYWluXG4vLyAgICAgICAgICAgICAgICAgICAgIH07XG4vLyAgICAgICAgICAgICAgICAgfSk7XG4vLyAgICAgICAgICAgICB9XG4vLyAgICAgICAgIH1cblxuLy8gICAgIH1cbi8vICAgICAkKCcucGFnZS10ZW1wbGF0ZS1wYWdlLWlubmVyLXBhZ2UgLmZsZXgnKS5lYWNoKGZ1bmN0aW9uKCkge1xuLy8gICAgICAgICB2YXIgc3RyID0gJCh0aGlzKS5maW5kKCdoMicpLnRleHQoKTtcbi8vICAgICAgICAgc3RyID0gc3RyLnJlcGxhY2UoL1xccysvZywgJy0nKS50b0xvd2VyQ2FzZSgpO1xuLy8gICAgICAgICAkKHRoaXMpLmZpbmQoJ2gyJykuYXR0cignaWQnLCBzdHIpO1xuLy8gICAgIH0pO1xuXG4vLyAgICAgJCgnLnBhZ2UtdGVtcGxhdGUtcGFnZS1mdWxsLXdpZHRoIC5mdWxsLXdpZHRoLWNvbnRlbnQnKS5lYWNoKGZ1bmN0aW9uKCkge1xuLy8gICAgICAgICB2YXIgc3RyID0gJCh0aGlzKS5maW5kKCdoMicpLnRleHQoKTtcbi8vICAgICAgICAgc3RyID0gc3RyLnJlcGxhY2UoL1xccysvZywgJy0nKS50b0xvd2VyQ2FzZSgpO1xuLy8gICAgICAgICAkKHRoaXMpLmF0dHIoJ2lkJywgc3RyKTtcbi8vICAgICB9KTtcblxuXG4vLyAgICAgJCgnLmZsZXggaDInKS5lYWNoKGFkZFRvU2lkZWJhcik7XG5cbi8vICAgICAkKCcucmlnaHQtc2lkZWJhciBhOmZpcnN0LWNoaWxkJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuLy8gICAgICQoJy5yaWdodC1zaWRlYmFyIGEnKS5vbignY2xpY2snLCBzY3JvbGxTbW9vdGgpO1xuXG5cblxuLy8gICAgIC8vIFJpZ2h0IHNpZGViYXIgc3RpY2sgcG9zaXRpb25cbi8vICAgICBjb25zdCBoZWFkZXJIZWlnaHQgPSAkKCcuc2l0ZS1oZWFkZXInKS5vdXRlckhlaWdodCh0cnVlKTtcbi8vICAgICBjb25zdCBzaWRlYmFySGVpZ2h0ID0gJCgnLnJpZ2h0LXNpZGViYXInKS5vdXRlckhlaWdodCh0cnVlKTtcbi8vICAgICAkKCcucmlnaHQtc2lkZWJhcicpLmNzcygndG9wJywgaGVhZGVySGVpZ2h0KTtcbi8vICAgICAkKCcucmlnaHQtc2lkZWJhcicpLmNzcygnLS1vZmZzZXQnLCBoZWFkZXJIZWlnaHQpO1xuLy8gICAgIC8vJCgnLnJpZ2h0LXNpZGViYXInKS5jc3MoJ21heC1oZWlnaHQnLCBzaWRlYmFySGVpZ2h0ICsgMTAwKTtcblxuLy8gICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKSB7XG4vLyAgICAgICAgIGNvbnN0IGhlYWRlckhlaWdodDIgPSAkKCcuc2l0ZS1oZWFkZXInKS5vdXRlckhlaWdodCh0cnVlKTtcbi8vICAgICAgICAgY29uc3Qgc2lkZWJhckhlaWdodDIgPSAkKCcucmlnaHQtc2lkZWJhcicpLm91dGVySGVpZ2h0KHRydWUpO1xuLy8gICAgICAgICAkKCcucmlnaHQtc2lkZWJhcicpLmNzcygndG9wJywgaGVhZGVySGVpZ2h0Mik7XG4vLyAgICAgICAgICQoJy5yaWdodC1zaWRlYmFyJykuY3NzKCctLW9mZnNldCcsIGhlYWRlckhlaWdodDIpO1xuLy8gICAgICAgICAvLyQoJy5yaWdodC1zaWRlYmFyJykuY3NzKCdtYXgtaGVpZ2h0Jywgc2lkZWJhckhlaWdodDIgKyAxMDApO1xuXG4vLyAgICAgfSk7XG5cblxuLy8gICAgIC8vIFJpZ2h0IFNpZGViYXIgSGlnaGxpZ2h0aW5nXG4vLyAgICAgLy8gJHNlY3Rpb25zIGluY2x1ZGVzIGFsbCBvZiB0aGUgY29udGFpbmVyIGRpdnMgdGhhdCByZWxhdGUgdG8gbWVudSBpdGVtcy5cbi8vICAgICB2YXIgJHNlY3Rpb25zID0gJCgnLmNlbnRlci1jb250ZW50IC5mbGV4Jyk7XG5cblxuLy8gICAgIGlmICggJCggJ2JvZHknICkuZmlyc3QoKS5oYXNDbGFzcyggJ3BhZ2UtdGVtcGxhdGUtcGFnZS1pbm5lci1wYWdlJyApICkge1xuXG4vLyAgICAgICAvLyBUaGUgdXNlciBzY3JvbGxzXG4vLyAgICAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCl7XG5cbi8vICAgICAgICAgLy8gY3VycmVudFNjcm9sbCBpcyB0aGUgbnVtYmVyIG9mIHBpeGVscyB0aGUgd2luZG93IGhhcyBiZWVuIHNjcm9sbGVkXG4vLyAgICAgICAgIHZhciBjdXJyZW50U2Nyb2xsID0gJCh0aGlzKS5zY3JvbGxUb3AoKTtcblxuLy8gICAgICAgICAvLyAkY3VycmVudFNlY3Rpb24gaXMgc29tZXdoZXJlIHRvIHBsYWNlIHRoZSBzZWN0aW9uIHdlIG11c3QgYmUgbG9va2luZyBhdFxuLy8gICAgICAgICB2YXIgJGN1cnJlbnRTZWN0aW9uID0gJyc7XG5cbi8vICAgICAgICAgLy8gV2UgY2hlY2sgdGhlIHBvc2l0aW9uIG9mIGVhY2ggb2YgdGhlIGRpdnMgY29tcGFyZWQgdG8gdGhlIHdpbmRvd3Mgc2Nyb2xsIHBvc2l0b25cbi8vICAgICAgICAgJHNlY3Rpb25zLmVhY2goZnVuY3Rpb24oKXtcbi8vICAgICAgICAgICAvLyBkaXZQb3NpdGlvbiBpcyB0aGUgcG9zaXRpb24gZG93biB0aGUgcGFnZSBpbiBweCBvZiB0aGUgY3VycmVudCBzZWN0aW9uIHdlIGFyZSB0ZXN0aW5nXG4vLyAgICAgICAgICAgdmFyIGRpdlBvc2l0aW9uID0gJCh0aGlzKS5vZmZzZXQoKS50b3A7XG5cbi8vICAgICAgICAgICAvLyBJZiB0aGUgZGl2UG9zaXRpb24gaXMgbGVzcyB0aGUgdGhlIGN1cnJlbnRTY3JvbGwgcG9zaXRpb24gdGhlIGRpdiB3ZSBhcmUgdGVzdGluZyBoYXMgbW92ZWQgYWJvdmUgdGhlIHdpbmRvdyBlZGdlLlxuLy8gICAgICAgICAgIC8vIHRoZSAtMSBpcyBzbyB0aGF0IGl0IGluY2x1ZGVzIHRoZSBkaXYgMXB4IGJlZm9yZSB0aGUgZGl2IGxlYXZlIHRoZSB0b3Agb2YgdGhlIHdpbmRvdy5cbi8vICAgICAgICAgICBpZiggZGl2UG9zaXRpb24gLSAyMDAgPCBjdXJyZW50U2Nyb2xsICl7XG4vLyAgICAgICAgICAgICAvLyBXZSBoYXZlIGVpdGhlciByZWFkIHRoZSBzZWN0aW9uIG9yIGFyZSBjdXJyZW50bHkgcmVhZGluZyB0aGUgc2VjdGlvbiBzbyB3ZSdsbCBjYWxsIGl0IG91ciBjdXJyZW50IHNlY3Rpb25cbi8vICAgICAgICAgICAgICRjdXJyZW50U2VjdGlvbiA9ICQodGhpcyk7XG5cbi8vICAgICAgICAgICAgIC8vIElmIHRoZSBuZXh0IGRpdiBoYXMgYWxzbyBiZWVuIHJlYWQgb3Igd2UgYXJlIGN1cnJlbnRseSByZWFkaW5nIGl0IHdlIHdpbGwgb3ZlcndyaXRlIHRoaXMgdmFsdWUgYWdhaW4uIFRoaXMgd2lsbCBsZWF2ZSB1cyB3aXRoIHRoZSBMQVNUIGRpdiB0aGF0IHBhc3NlZC5cbi8vICAgICAgICAgICB9XG4vLyAgICAgICAgICAgICBpZiAoICRjdXJyZW50U2VjdGlvbiAhPSAnJyl7XG5cbi8vICAgICAgICAgICAgICAgLy8gVGhpcyBpcyB0aGUgYml0IG9mIGNvZGUgdGhhdCB1c2VzIHRoZSBjdXJyZW50U2VjdGlvbiBhcyBpdHMgc291cmNlIG9mIElEXG4vLyAgICAgICAgICAgICAgICAgdmFyIGlkID0gJGN1cnJlbnRTZWN0aW9uLmZpbmQoJ2gyJykuYXR0cignaWQnKTtcbi8vICAgICAgICAgICAgICAgICAkKCdhLnNjcm9sbC1saW5rJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuLy8gICAgICAgICAgICAgICAgICQoJ2Euc2Nyb2xsLWxpbmtbaHJlZj1cIiMnK2lkKydcIl0nKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4vLyAgICAgICAgICAgICB9XG5cblxuLy8gICAgICAgICB9KTtcblxuLy8gICAgICAgfSk7XG4vLyAgICAgfVxuXG4vLyAgICAgLyoqXG4vLyAgICAgICogRXhwYW5kL0NvbGxhcHNlIFJlcGVhdGVyXG4vLyAgICAgICovXG4vLyAgICAgZnVuY3Rpb24gdG9nZ2xlQXR0cigpIHtcbi8vICAgICAgICAgaWYgKCQoJy5jb2xsYXBzZS10b2dnbGUnKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcbi8vICAgICAgICAgICAgICQoJy5jb2xsYXBzZS1jb250ZW50JykuYXR0cignYXJpYS1oaWRkZW4nLCBmYWxzZSk7XG4vLyAgICAgICAgIH0gZWxzZSB7XG4vLyAgICAgICAgICAgICAkKCcuY29sbGFwc2UtY29udGVudCcpLmF0dHIoJ2FyaWEtaGlkZGVuJywgdHJ1ZSk7XG4vLyAgICAgICAgIH1cbi8vICAgICB9XG5cbi8vICAgICBmdW5jdGlvbiB0b2dnbGVFeHBhbmRDb2xsYXBzZSgpIHtcbi8vICAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4vLyAgICAgICAgICQoJy5hY3RpdmUnKS5ub3QodGhpcykubmV4dChcIi5jb2xsYXBzZS1jb250ZW50XCIpLnNsaWRlVG9nZ2xlKCk7XG4vLyAgICAgICAgICQoJy5hY3RpdmUnKS5ub3QodGhpcykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuLy8gICAgICAgICAkKHRoaXMpLm5leHQoXCIuY29sbGFwc2UtY29udGVudFwiKS5zbGlkZVRvZ2dsZSgpO1xuLy8gICAgICAgICB0b2dnbGVBdHRyKCk7XG4vLyAgICAgICAgIHJldHVybiBmYWxzZTtcbi8vICAgICB9XG4vLyAgICAgJCgnLmNvbGxhcHNlLWNvbnRlbnQnKS5oaWRlKCk7XG4vLyAgICAgJCgnLmNvbGxhcHNlLXRvZ2dsZScpLm9uKCdjbGljaycsIHRvZ2dsZUV4cGFuZENvbGxhcHNlKTtcblxuXG4vLyAgICAgLy9BZGQgYSB0YWJsZSByb3cgc3R5bGVcbi8vICAgICAkKCcudGFibGUtaGVhZGVyJykucGFyZW50KCcuY29sdW1uLTEnKS5hZGRDbGFzcygnaGVhZGVyLXJvdycpO1xuXG5cbi8vICAgICAvLyAvL0ltYWdlIENhcmRzXG4vLyAgICAgaWYoJCh3aW5kb3cpLndpZHRoKCkgPj0gMTAyNCl7XG4vLyAgICAgICAgICQoJy5pbWFnZS1jYXJkc19pdGVtJykuZWFjaChmdW5jdGlvbigpIHtcbi8vICAgICAgICAgICAgIHZhciBjYXJkSGVpZ2h0ID0gJCh0aGlzKS5maW5kKCcuY2FyZC1zbGlkZScpLm91dGVySGVpZ2h0KHRydWUpO1xuLy8gICAgICAgICAgICAgdmFyIGNhcmRIZWlnaHRUb3RhbCA9IGNhcmRIZWlnaHQgKyAzMDtcbi8vICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNhcmRIZWlnaHRUb3RhbCk7XG4vLyAgICAgICAgICAgICAkKHRoaXMpLmNzcygnaGVpZ2h0JywgY2FyZEhlaWdodFRvdGFsICsgJ3B4Jyk7XG4vLyAgICAgICAgICB9KTtcbi8vICAgICAgICAgdmFyICRzYW1lSGVpZ2h0SGVhZGVyID0gJCgnLmltYWdlLWNhcmRzX2l0ZW0nKTtcbi8vICAgICAgICAgdmFyIG1heEhlaWdodCA9IDA7XG4vLyAgICAgICAgICRzYW1lSGVpZ2h0SGVhZGVyLmVhY2goZnVuY3Rpb24oKSB7XG4vLyAgICAgICAgICAgICBtYXhIZWlnaHQgPSBNYXRoLm1heChtYXhIZWlnaHQsICQodGhpcykub3V0ZXJIZWlnaHQoKSk7XG4vLyAgICAgICAgIH0pO1xuLy8gICAgICAgICAkc2FtZUhlaWdodEhlYWRlci5jc3MoeyBoZWlnaHQ6IG1heEhlaWdodCArICdweCcgfSk7XG5cbi8vICAgICAgICAgJCgnLmltYWdlLWNhcmRzX2l0ZW0nKS5lYWNoKGZ1bmN0aW9uKCkge1xuLy8gICAgICAgICAgICAgdmFyIGNhcmRDb250ZW50ID0gJCh0aGlzKS5maW5kKCcuY2FyZC1zbGlkZSAuY2FyZC1jb250ZW50Jykub3V0ZXJIZWlnaHQodHJ1ZSk7XG4vLyAgICAgICAgICAgICB2YXIgY2FyZENvbnRlbnRUb3RhbCA9IGNhcmRDb250ZW50ICsgMzA7XG4vLyAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5jYXJkLXNsaWRlJykuY3NzKCdib3R0b20nLCctJyArIGNhcmRDb250ZW50VG90YWwgKyAncHgnKTtcbi8vICAgICAgICAgICAgICQodGhpcykuaG92ZXIoZnVuY3Rpb24oKXtcbi8vICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuY2FyZC1zbGlkZScpLmNzcygnYm90dG9tJywwKTtcbi8vICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oKXtcbi8vICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuY2FyZC1zbGlkZScpLmNzcygnYm90dG9tJywnLScgKyBjYXJkQ29udGVudFRvdGFsICsgJ3B4Jyk7XG4vLyAgICAgICAgICAgICB9KTtcbi8vICAgICAgICAgIH0pO1xuLy8gICAgIH0gZWxzZSB7XG4vLyAgICAgICAgICQoJy5pbWFnZS1jYXJkc19pdGVtJykuZWFjaChmdW5jdGlvbigpIHtcbi8vICAgICAgICAgICAgICQodGhpcykuY3NzKCdoZWlnaHQnLCAnYXV0bycpO1xuLy8gICAgICAgICB9KTtcbi8vICAgICB9XG5cbi8vICAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCkge1xuLy8gICAgICAgICBpZigkKHdpbmRvdykud2lkdGgoKSA+PSAxMDI0KXtcbi8vICAgICAgICAgICAgICQoJy5pbWFnZS1jYXJkc19pdGVtJykuZWFjaChmdW5jdGlvbigpIHtcbi8vICAgICAgICAgICAgICAgICB2YXIgY2FyZEhlaWdodDIgPSAkKHRoaXMpLmZpbmQoJy5jYXJkLXNsaWRlJykub3V0ZXJIZWlnaHQodHJ1ZSk7XG4vLyAgICAgICAgICAgICAgICAgdmFyIGNhcmRIZWlnaHRUb3RhbDIgPSBjYXJkSGVpZ2h0MiArIDMwO1xuLy8gICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNhcmRIZWlnaHRUb3RhbDIpO1xuLy8gICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCdoZWlnaHQnLCBjYXJkSGVpZ2h0VG90YWwyICsgJ3B4Jyk7XG4vLyAgICAgICAgICAgICAgfSk7XG4vLyAgICAgICAgICAgICB2YXIgJHNhbWVIZWlnaHRIZWFkZXIyID0gJCgnLmltYWdlLWNhcmRzX2l0ZW0nKTtcbi8vICAgICAgICAgICAgIHZhciBtYXhIZWlnaHQyID0gMDtcbi8vICAgICAgICAgICAgICRzYW1lSGVpZ2h0SGVhZGVyMi5lYWNoKGZ1bmN0aW9uKCkge1xuLy8gICAgICAgICAgICAgICAgIG1heEhlaWdodDIgPSBNYXRoLm1heChtYXhIZWlnaHQyLCAkKHRoaXMpLm91dGVySGVpZ2h0KCkpO1xuLy8gICAgICAgICAgICAgfSk7XG4vLyAgICAgICAgICAgICAkc2FtZUhlaWdodEhlYWRlcjIuY3NzKHsgaGVpZ2h0OiBtYXhIZWlnaHQyICsgJ3B4JyB9KTtcblxuLy8gICAgICAgICAgICAgJCgnLmltYWdlLWNhcmRzX2l0ZW0nKS5lYWNoKGZ1bmN0aW9uKCkge1xuLy8gICAgICAgICAgICAgICAgIHZhciBjYXJkQ29udGVudDIgPSAkKHRoaXMpLmZpbmQoJy5jYXJkLXNsaWRlIC5jYXJkLWNvbnRlbnQnKS5vdXRlckhlaWdodCh0cnVlKTtcbi8vICAgICAgICAgICAgICAgICB2YXIgY2FyZENvbnRlbnRUb3RhbDIgPSBjYXJkQ29udGVudDIgKyAzMDtcbi8vICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5jYXJkLXNsaWRlJykuY3NzKCdib3R0b20nLCctJyArIGNhcmRDb250ZW50VG90YWwyICsgJ3B4Jyk7XG4vLyAgICAgICAgICAgICAgICAgJCh0aGlzKS5ob3ZlcihmdW5jdGlvbigpe1xuLy8gICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuY2FyZC1zbGlkZScpLmNzcygnYm90dG9tJywwKTtcbi8vICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCl7XG4vLyAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5jYXJkLXNsaWRlJykuY3NzKCdib3R0b20nLCctJyArIGNhcmRDb250ZW50VG90YWwyICsgJ3B4Jyk7XG4vLyAgICAgICAgICAgICAgICAgfSk7XG4vLyAgICAgICAgICAgICAgfSk7XG4vLyAgICAgICAgIH0gZWxzZSB7XG4vLyAgICAgICAgICAgICAkKCcuaW1hZ2UtY2FyZHNfaXRlbScpLmVhY2goZnVuY3Rpb24oKSB7XG4vLyAgICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2hlaWdodCcsICdhdXRvJyk7XG4vLyAgICAgICAgICAgICB9KTtcbi8vICAgICAgICAgfVxuLy8gICAgIH0pO1xuXG5cbi8vIH0pO1xuIiwiLy8galF1ZXJ5KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigkKSB7XG4vLyAgICAgLyoqXG4vLyAgICAgICogTGVmdCBTaWRlYmFyIE1vYmlsZSBkcm9wZG93blxuLy8gICAgICAqL1xuLy8gICAgIGZ1bmN0aW9uIHRvZ2dsZUZpbHRlcnMoKSB7XG4vLyAgICAgICAgIGlmICgkKHRoaXMpLndpZHRoKCkgPD0gMTAyNCkge1xuLy8gICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnY2xpY2snKTtcbi8vICAgICAgICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuLy8gICAgICAgICAgICAgJChcIi5maWx0ZXItY29udGFpbmVyXCIpLnNsaWRlVG9nZ2xlKCk7XG4vLyAgICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcbi8vICAgICAgICAgICAgICAgICAkKCcuZmlsdGVyLWNvbnRhaW5lcicpLmF0dHIoJ2FyaWEtaGlkZGVuJywgZmFsc2UpO1xuLy8gICAgICAgICAgICAgfSBlbHNlIHtcbi8vICAgICAgICAgICAgICAgICAkKCcuZmlsdGVyLWNvbnRhaW5lcicpLmF0dHIoJ2FyaWEtaGlkZGVuJywgdHJ1ZSk7XG4vLyAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4vLyAgICAgICAgIH1cbi8vICAgICB9XG5cbi8vICAgICAvLyAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCkge1xuLy8gICAgIC8vICAgICBpZiAoJCh0aGlzKS53aWR0aCgpID49IDEwMjQpIHtcbi8vICAgICAvLyAgICAgICAgICQoJy5maWx0ZXItY29udGFpbmVyJykuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJyk7XG4vLyAgICAgLy8gICAgICAgICAkKCcuZmlsdGVyLWNvbnRhaW5lcicpLmF0dHIoJ2FyaWEtaGlkZGVuJywgZmFsc2UpO1xuLy8gICAgIC8vICAgICB9IGVsc2Uge1xuLy8gICAgIC8vICAgICAgICAgJCgnLmZpbHRlci1jb250YWluZXInKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuLy8gICAgIC8vICAgICAgICAgJCgnLmZpbHRlci1jb250YWluZXInKS5hdHRyKCdhcmlhLWhpZGRlbicsIHRydWUpO1xuLy8gICAgIC8vXG4vLyAgICAgLy8gICAgIH1cbi8vICAgICAvLyB9KTtcblxuXG4vLyAgICAgJCgnLmZpbHRlci10aXRsZScpLm9uKCdtb3VzZWRvd24gdG91Y2hzdGFydCcsIHRvZ2dsZUZpbHRlcnMpO1xuLy8gICAgIC8vIFxuLy8gICAgIC8vICQoZG9jdW1lbnQpLm9uKFwic2Y6YWpheGZpbmlzaFwiLCBcIi5zZWFyY2hhbmRmaWx0ZXJcIiwgZnVuY3Rpb24oKXtcbi8vICAgICAvLyAgICAgIGlmICgkKHRoaXMpLndpZHRoKCkgPD0gMTAyNCkge1xuLy8gICAgIC8vICAgICAgICAgJCgnLmZpbHRlci1jb250YWluZXInKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuLy8gICAgIC8vICAgICAgICAgJCgnLmZpbHRlci1jb250YWluZXInKS5hdHRyKCdhcmlhLWhpZGRlbicsIHRydWUpO1xuLy8gICAgIC8vICAgICB9XG4vLyAgICAgLy9cbi8vICAgICAvLyB9KTtcblxuLy8gICAgIHZhciBxdWlja2xpbmtzID0gJCgnLmV2ZW50LXNpZGViYXJfX3F1aWNrbGlua3MnKTtcbi8vICAgICBpZiAoJCh0aGlzKS53aWR0aCgpIDw9IDEwMjQpIHtcbi8vICAgICAgICAgJCgnLmV2ZW50LWxpc3QnKS5hcHBlbmQocXVpY2tsaW5rcyk7XG4vLyAgICAgfSBlbHNlIHtcbi8vICAgICAgICAgJCgnLmV2ZW50LXNpZGViYXInKS5hcHBlbmQocXVpY2tsaW5rcyk7XG4vLyAgICAgfVxuXG4vLyAgICAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpIHtcbi8vICAgICAgICAgaWYgKCQodGhpcykud2lkdGgoKSA8PSAxMDI0KSB7XG4vLyAgICAgICAgICAgICAkKCcuZXZlbnQtbGlzdCcpLmFwcGVuZChxdWlja2xpbmtzKTtcbi8vICAgICAgICAgfSBlbHNlIHtcbi8vICAgICAgICAgICAgICQoJy5ldmVudC1zaWRlYmFyJykuYXBwZW5kKHF1aWNrbGlua3MpO1xuLy8gICAgICAgICB9XG4vLyAgICAgfSk7XG5cbi8vICAgICAvLyBUZXh0Ym9vayBNb2JpbGUgTGlua3MgRHJvcGRvd29uXG5cbi8vICAgICAkKFwiLm1vYmlsZS1hY3Rpb25zID4gLmljb24td3JhcFwiKS5vbihcIm1vdXNlZG93biB0b3VjaHN0YXJ0XCIsIGZ1bmN0aW9uKGUpIHtcbi8vICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuLy8gICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcbi8vICAgICAgICAgJCh0aGlzKS5uZXh0KCcubW9iaWxlLWFjdGlvbi1kcm9wZG93bicpLnRvZ2dsZUNsYXNzKCdvcGVuJyk7XG4vLyAgICAgICAgIHJldHVybiBmYWxzZTtcbi8vICAgICB9KTtcblxuLy8gfSk7XG4iLCIvLyBqUXVlcnkoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCQpIHtcblxuLy8gICAgIC8vIFNjcm9sbCB0byBiZWhhdmlvciBmb3IgbGlua3MgdGhhdCBpbmNsdWRlIGFuZCBJRCBcbi8vICAgICBpZiAod2luZG93LmxvY2F0aW9uLmhhc2gpIHtcbi8vICAgICAgICAgIHZhciBoYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2g7XG4vLyAgICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG4vLyAgICAgICAgICAgICAgc2Nyb2xsVG9wIDogICQoaGFzaCkub2Zmc2V0KCkudG9wXG4vLyAgICAgICAgICB9LCA1MDApO1xuLy8gICAgICB9O1xuXG4vLyAgICAgJCgnLnByb2dyYW0tc2xpZGVyX3NsaWRlX3dyYXAnKS5zbGljayh7XG4vLyAgICAgICAgIHNwZWVkOiAzMDAsXG4vLyAgICAgICAgIHNsaWRlc1RvU2hvdzogMSxcbi8vICAgICAgICAgY2VudGVybW9kZTogdHJ1ZSxcbi8vICAgICAgICAgaW5maW5pdGU6IHRydWUsXG4vLyAgICAgICAgIGRyYWdnYWJsZTogdHJ1ZSxcbi8vICAgICAgICAgY3NzRWFzZTogJ2xpbmVhcicsXG4vLyAgICAgICAgIHZhcmlhYmxlV2lkdGg6IHRydWUsXG4vLyAgICAgICAgIGFkYXB0aXZlSGVpZ2h0OiB0cnVlLFxuLy8gICAgICAgICB0b3VjaFRocmVzaG9sZDogMTAwLFxuLy8gICAgICAgICAvL2NlbnRlck1vZGU6IHRydWUsXG4vLyAgICAgICAgIGZvY3VzT25TZWxlY3Q6IHRydWUsXG4vLyAgICAgICAgIHByZXZBcnJvdzogJCgnLnByZXYtYXJyb3cnKSxcbi8vICAgICAgICAgbmV4dEFycm93OiAkKCcubmV4dC1hcnJvdycpLFxuLy8gICAgICAgICByZXNwb25zaXZlOiBbXG4vLyAgICAgICAgIHtcbi8vICAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDEwMjQsXG4vLyAgICAgICAgICAgICBzZXR0aW5nczoge1xuLy8gICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMSxcbi8vICAgICAgICAgICAgICAgICAvL3NsaWRlc1RvU2Nyb2xsOiAzLFxuLy8gICAgICAgICAgICAgICAgIC8vaW5maW5pdGU6IHRydWUsXG4vLyAgICAgICAgICAgICAgICAgLy9kb3RzOiB0cnVlXG4vLyAgICAgICAgICAgICB9XG4vLyAgICAgICAgIH0sXG4vLyAgICAgICAgIHtcbi8vICAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDc2OCxcbi8vICAgICAgICAgICAgIHNldHRpbmdzOiB7XG4vLyAgICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxuLy8gICAgICAgICAgICAgICAgIC8vc2xpZGVzVG9TY3JvbGw6IDJcbi8vICAgICAgICAgICAgIH1cbi8vICAgICAgICAgfSxcbi8vICAgICAgICAge1xuLy8gICAgICAgICAgICAgYnJlYWtwb2ludDogNDgwLFxuLy8gICAgICAgICAgICAgc2V0dGluZ3M6IHtcbi8vICAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDEsXG4vLyAgICAgICAgICAgICAgICAgLy9zbGlkZXNUb1Njcm9sbDogMVxuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICB9XG4vLyAgICAgICBdXG4vLyAgICAgfSk7XG5cbi8vICAgICAvL3ZpZGVvIHNsaWRlclxuLy8gICAgICQoJy5tZWRpYS1nYWxsZXJ5Jykuc2xpY2soe1xuLy8gICAgICAgICBzcGVlZDogMzAwLFxuLy8gICAgICAgICBzbGlkZXNUb1Nob3c6IDEsXG4vLyAgICAgICAgIGNlbnRlcm1vZGU6IHRydWUsXG4vLyAgICAgICAgIGluZmluaXRlOiB0cnVlLFxuLy8gICAgICAgICBkcmFnZ2FibGU6IHRydWUsXG4vLyAgICAgICAgIGNzc0Vhc2U6ICdsaW5lYXInLFxuLy8gICAgICAgICB2YXJpYWJsZVdpZHRoOiB0cnVlLFxuLy8gICAgICAgICBhZGFwdGl2ZUhlaWdodDogdHJ1ZSxcbi8vICAgICAgICAgdG91Y2hUaHJlc2hvbGQ6IDEwMCxcbi8vICAgICAgICAgLy9jZW50ZXJNb2RlOiB0cnVlLFxuLy8gICAgICAgICBmb2N1c09uU2VsZWN0OiBmYWxzZSxcbi8vICAgICAgICAgcHJldkFycm93OiAkKCcucHJldi1hcnJvdy12aWRlbycpLFxuLy8gICAgICAgICBuZXh0QXJyb3c6ICQoJy5uZXh0LWFycm93LXZpZGVvJyksXG4vLyAgICAgICAgIHJlc3BvbnNpdmU6IFtcbi8vICAgICAgICAge1xuLy8gICAgICAgICAgICAgYnJlYWtwb2ludDogMTAyNCxcbi8vICAgICAgICAgICAgIHNldHRpbmdzOiB7XG4vLyAgICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxuLy8gICAgICAgICAgICAgICAgIC8vc2xpZGVzVG9TY3JvbGw6IDMsXG4vLyAgICAgICAgICAgICAgICAgLy9pbmZpbml0ZTogdHJ1ZSxcbi8vICAgICAgICAgICAgICAgICAvL2RvdHM6IHRydWVcbi8vICAgICAgICAgICAgIH1cbi8vICAgICAgICAgfSxcbi8vICAgICAgICAge1xuLy8gICAgICAgICAgICAgYnJlYWtwb2ludDogNzY4LFxuLy8gICAgICAgICAgICAgc2V0dGluZ3M6IHtcbi8vICAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDEsXG4vLyAgICAgICAgICAgICAgICAgLy9zbGlkZXNUb1Njcm9sbDogMlxuLy8gICAgICAgICAgICAgICAgIC8vdmFyaWFibGVXaWR0aDogZmFsc2UsXG4vLyAgICAgICAgICAgICB9XG4vLyAgICAgICAgIH0sXG4vLyAgICAgICAgIHtcbi8vICAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDQ4MCxcbi8vICAgICAgICAgICAgIHNldHRpbmdzOiB7XG4vLyAgICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxuLy8gICAgICAgICAgICAgICAgIC8vdmFyaWFibGVXaWR0aDogZmFsc2UsXG4vLyAgICAgICAgICAgICAgICAgLy9zbGlkZXNUb1Njcm9sbDogMVxuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICB9XG4vLyAgICAgICBdXG4vLyAgICAgfSk7XG5cbi8vICAgICAkKCcudGFiLWNvbnRlbnQtd3JhcCcpLnNsaWNrKHtcbi8vICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxuLy8gICAgICAgICBzbGlkZXNUb1Njcm9sbDogMSxcbi8vICAgICAgICAgYXJyb3dzOiBmYWxzZSxcbi8vICAgICAgICAgZmFkZTogdHJ1ZSxcbi8vICAgICAgICAgaW5maW5pdGU6IHRydWUsXG4vLyAgICAgICAgIGFkYXB0aXZlSGVpZ2h0OiB0cnVlLFxuLy8gICAgICAgICBhc05hdkZvcjogJy50YWInXG4vLyAgICAgfSk7XG4vLyAgICAgLy92YXIgdGFiQ291bnQgPSAkKFwiLnRhYiBwXCIpLmxlbmd0aCAtIC4xO1xuLy8gICAgICQoJy50YWInKS5zbGljayh7XG4vLyAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxLFxuLy8gICAgICAgICBzbGlkZXNUb1Nob3c6IDEyLFxuLy8gICAgICAgICBhc05hdkZvcjogJy50YWItY29udGVudC13cmFwJyxcbi8vICAgICAgICAgZm9jdXNPblNlbGVjdDogdHJ1ZSxcbi8vICAgICAgICAgaW5maW5pdGU6IHRydWUsXG4vLyAgICAgICAgIGNzc0Vhc2U6ICdsaW5lYXInLFxuLy8gICAgICAgICB2YXJpYWJsZVdpZHRoOiB0cnVlLFxuLy8gICAgICAgICBwcmV2QXJyb3c6ICQoJy5wcmV2LWFycm93LXRpbWVsaW5lJyksXG4vLyAgICAgICAgIG5leHRBcnJvdzogJCgnLm5leHQtYXJyb3ctdGltZWxpbmUnKSxcbi8vICAgICAgICAgcmVzcG9uc2l2ZTogW1xuLy8gICAgICAgICB7XG4vLyAgICAgICAgICAgICBicmVha3BvaW50OiA3NjgsXG4vLyAgICAgICAgICAgICBzZXR0aW5nczoge1xuLy8gICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMyxcbi8vICAgICAgICAgICAgICAgICB2YXJpYWJsZVdpZHRoOiBmYWxzZSxcbi8vICAgICAgICAgICAgICAgICAvL3NsaWRlc1RvU2Nyb2xsOiAxXG4vLyAgICAgICAgICAgICB9XG4vLyAgICAgICAgIH0sXG4vLyAgICAgICAgIHtcbi8vICAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDQ4MCxcbi8vICAgICAgICAgICAgIHNldHRpbmdzOiB7XG4vLyAgICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAyLFxuLy8gICAgICAgICAgICAgICAgIHZhcmlhYmxlV2lkdGg6IGZhbHNlLFxuLy8gICAgICAgICAgICAgICAgIC8vc2xpZGVzVG9TY3JvbGw6IDFcbi8vICAgICAgICAgICAgIH1cbi8vICAgICAgICAgfSxcblxuLy8gICAgICAgICBdXG4vLyAgICAgfSk7XG5cbi8vICAgICAkKCcuc3RhdHMnKS5zbGljayh7XG4vLyAgICAgICAgIHNwZWVkOiAzMDAsXG4vLyAgICAgICAgIHNsaWRlc1RvU2hvdzogMSxcbi8vICAgICAgICAgY2VudGVybW9kZTogdHJ1ZSxcbi8vICAgICAgICAgaW5maW5pdGU6IHRydWUsXG4vLyAgICAgICAgIGRyYWdnYWJsZTogdHJ1ZSxcbi8vICAgICAgICAgY3NzRWFzZTogJ2xpbmVhcicsXG4vLyAgICAgICAgIHZhcmlhYmxlV2lkdGg6IHRydWUsXG4vLyAgICAgICAgIGFkYXB0aXZlSGVpZ2h0OiB0cnVlLFxuLy8gICAgICAgICB0b3VjaFRocmVzaG9sZDogMTAwLFxuLy8gICAgICAgICBmb2N1c09uU2VsZWN0OiBmYWxzZSxcbi8vICAgICAgICAgYXJyb3dzOiBmYWxzZSxcbi8vICAgICAgICAgbW9iaWxlRmlyc3Q6IHRydWUsXG4vLyAgICAgICAgIHJlc3BvbnNpdmU6IFt7XG4vLyAgICAgICAgICAgYnJlYWtwb2ludDogNzY4LFxuLy8gICAgICAgICAgIHNldHRpbmdzOiAndW5zbGljaydcbi8vICAgICAgICAgfV1cbi8vICAgICB9KTtcblxuLy8gICAgIC8vIE1ha2luZyBzdXJlIHRoZSBzbGlkZXIgZmlyZXMgb24gd2hlbiB0aGUgd2luZG93IHJlc2l6ZXNcbi8vICAgICAgICAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBmdW5jdGlvbigpe1xuLy8gICAgICAgICAgICQoJy5zdGF0cycpLnNsaWNrKCdyZXNpemUnKTtcbi8vICAgICAgICAgfSk7XG5cblxuLy8gICAgIC8vTW9kYWwgcG9wX3VwXG4vLyAgICAgaWYod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZignI3ZpZGVvLXBvcHVwJykgIT0gLTEpIHtcbi8vICAgICAgICAgJCgnLnZpZGVvLXBvcHVwJykuY3NzKCd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKTtcbi8vICAgICAgICAgJCgnLnZpZGVvLXBvcHVwJykuY3NzKCdvcGFjaXR5JywgJzEnKTtcbi8vICAgICAgICAgJCgnLnZpZGVvLXBvcHVwJykuY3NzKCd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKTtcbi8vICAgIH1cblxuLy8gICAgLy9jb250YWN0IG1vZGFsXG4vLyAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5jbG9zZS1wb3B1cCcsIGZ1bmN0aW9uKCl7XG4vLyAgICAgICAgICQoJy52aWRlby1wb3B1cCcpLmNzcygndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcbi8vICAgICAgICAgJCgnLnZpZGVvLXBvcHVwJykuY3NzKCdvcGFjaXR5JywgJzAnKTtcbi8vICAgICAgICAgJCgnLnBvcHVwLW92ZXJsYXknKS5jc3MoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XG4vLyAgICAgfSk7XG5cbi8vICAgICAvL1ZpZGVvXG4vLyAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy52aWRlby1idXR0b24nLCBmdW5jdGlvbigpe1xuLy8gICAgICAgICAkKCcudmlkZW8tcG9wdXAnKS5jc3MoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpO1xuLy8gICAgICAgICAkKCcudmlkZW8tcG9wdXAnKS5jc3MoJ29wYWNpdHknLCAnMScpO1xuLy8gICAgICAgICAkKCcucG9wdXAtb3ZlcmxheScpLmNzcygndmlzaWJpbGl0eScsICd2aXNpYmxlJyk7XG4vLyAgICAgfSk7XG5cbi8vICAgICAvL21lZGlhIGxpZ2h0Ym94ICh2aWRlbylcbi8vICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmltYWdlLW92ZXJsYXknLCBmdW5jdGlvbigpe1xuLy8gICAgICAgICAkKCcuaWZyYW1lJykudG9nZ2xlQ2xhc3MoJ29wZW4nKTtcbi8vICAgICB9KTtcbi8vICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmNsb3NlLXBvcHVwJywgZnVuY3Rpb24oKXtcbi8vICAgICAgICAgJCgnLmlmcmFtZScpLnJlbW92ZUNsYXNzKCdvcGVuJyk7XG4vLyAgICAgfSk7XG5cbi8vICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnBvcHVwLW92ZXJsYXknLCBmdW5jdGlvbigpe1xuLy8gICAgICAgICAkKCcudmlkZW8tcG9wdXAnKS5jc3MoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XG4vLyAgICAgICAgICQoJy52aWRlby1wb3B1cCcpLmNzcygnb3BhY2l0eScsICcwJyk7XG4vLyAgICAgICAgICQoJy5wb3B1cC1vdmVybGF5JykuY3NzKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xuLy8gICAgIH0pO1xuLy8gICAgIC8vQWRkIHRvIGhvdmVyXG4vLyAgICAgJCgnLmFkZC10by1jYWwnKS5ob3ZlcihmdW5jdGlvbiAoKSB7XG4vLyAgICAgICAgICQoJy5hZGQtdG8tbGlua3MnKS5zdG9wKCkuc2xpZGVUb2dnbGUoJ3Nsb3cnKTtcbi8vIFx0fSk7XG5cbi8vICAgICAvLyBBY2FkZW1pYyBGaWx0ZXJcbi8vICAgICBjb25zdCBjdXJyZW50WWVhciA9IChuZXcgRGF0ZSkuZ2V0RnVsbFllYXIoKTtcbi8vICAgICBpZiAoIWdldFVybFBhcmFtZXRlcignX3NmbV9hY2FkZW1pY190ZXJtJykgJiYgIWdldFVybFBhcmFtZXRlcignX3NmbV9hY2FkZW1pY195ZWFyJykpIHtcbi8vICAgICAgICAgY29uc29sZS5sb2coJ25vdCBmaWx0ZXJlZCcsIGN1cnJlbnRZZWFyKTtcbi8vICAgICAgICAgJCgnLmFjYWRlbWljLWNhbGVuZGFyX2ZpbHRlciBmb3JtID4gdWwgbGk6Zmlyc3QtY2hpbGQgdWwgbGk6bnRoLWNoaWxkKDIpJykuYWRkQ2xhc3MoJ3NmLW9wdGlvbi1hY3RpdmUnKTtcbi8vICAgICAgICAgJCgnLmFjYWRlbWljLWNhbGVuZGFyX2ZpbHRlciBmb3JtID4gdWwgbGk6Zmlyc3QtY2hpbGQgdWwgbGk6bnRoLWNoaWxkKDIpIGlucHV0JykuYXR0cignY2hlY2tlZCcsICdjaGVja2VkJyk7XG4vLyAgICAgICAgICQoJy5hY2FkZW1pYy1jYWxlbmRhcl9maWx0ZXIgZm9ybSA+IHVsIGxpOmxhc3QtY2hpbGQgc2VsZWN0IG9wdGlvbjpjb250YWlucyhcIicgKyBjdXJyZW50WWVhciArICdcIiknKS5hZGRDbGFzcygnc2Ytb3B0aW9uLWFjdGl2ZScpO1xuLy8gICAgICAgICAkKCcuYWNhZGVtaWMtY2FsZW5kYXJfZmlsdGVyIGZvcm0gPiB1bCBsaTpsYXN0LWNoaWxkIHNlbGVjdCBvcHRpb246Y29udGFpbnMoXCInICsgY3VycmVudFllYXIgKyAnXCIpJykuYXR0cignc2VsZWN0ZWQnLCAnc2VsZWN0ZWQnKTtcbi8vICAgICB9IGVsc2Uge1xuLy8gICAgICAgICBjb25zb2xlLmxvZygnZmlsdGVyZWQnKTtcbi8vICAgICB9XG5cblxuLy8gICAgIC8vTWFrZSBjYXJkcyBjb29sZXIgaW4gZ2VuZXJhbFxuLy8gICAgIHZhciAkc2FtZUhlaWdodEhlYWRlciA9ICQoJy5jb250ZW50LWNhcmRzX2l0ZW0gLm1haW4tdGV4dCcpO1xuLy8gICAgIHZhciAkbGFzdERpdiA9ICQoJy5jb250ZW50LWNhcmRzX2l0ZW06bnRoLWNoaWxkKG9kZCk6bGFzdC1jaGlsZCAubWFpbi10ZXh0Jyk7XG4vLyAgICAgdmFyIG1heEhlaWdodCA9IDA7XG4vLyAgICAgJHNhbWVIZWlnaHRIZWFkZXIuZWFjaChmdW5jdGlvbigpIHtcbi8vICAgICAgICAgbWF4SGVpZ2h0ID0gTWF0aC5tYXgobWF4SGVpZ2h0LCAkKHRoaXMpLm91dGVySGVpZ2h0KCkpO1xuLy8gICAgIH0pO1xuLy8gICAgICRzYW1lSGVpZ2h0SGVhZGVyLmNzcyh7IGhlaWdodDogbWF4SGVpZ2h0ICsgJ3B4JyB9KTtcbi8vICAgICAkbGFzdERpdi5jc3Moe2hlaWdodDonYXV0byd9KTtcblxuLy8gICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKSB7XG4vLyAgICAgICAgIHZhciAkc2FtZUhlaWdodEhlYWRlcjIgPSAkKCcuY29udGVudC1jYXJkc19pdGVtIC5tYWluLXRleHQnKTtcbi8vICAgICAgICAgdmFyICRsYXN0RGl2MiA9ICQoJy5jb250ZW50LWNhcmRzX2l0ZW06bnRoLWNoaWxkKG9kZCk6bGFzdC1jaGlsZCAubWFpbi10ZXh0Jyk7XG4vLyAgICAgICAgIHZhciBtYXhIZWlnaHQyID0gMDtcbi8vICAgICAgICAgJHNhbWVIZWlnaHRIZWFkZXIyLmVhY2goZnVuY3Rpb24oKSB7XG4vLyAgICAgICAgICAgICBtYXhIZWlnaHQyID0gTWF0aC5tYXgobWF4SGVpZ2h0MiwgJCh0aGlzKS5vdXRlckhlaWdodCgpKTtcbi8vICAgICAgICAgfSk7XG4vLyAgICAgICAgICRzYW1lSGVpZ2h0SGVhZGVyMi5jc3MoeyBoZWlnaHQ6IG1heEhlaWdodDIgKyAncHgnIH0pO1xuLy8gICAgICAgICAkbGFzdERpdjIuY3NzKHtoZWlnaHQ6J2F1dG8nfSk7XG4vLyAgICAgfSk7XG5cbi8vIH0pO1xuXG4vLyAvKipcbi8vICAqIEdldCBzZWFyY2ggcGFyYW0gZnJvbSB1cmxcbi8vICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4vLyAgKi9cbi8vIGZ1bmN0aW9uIGdldFVybFBhcmFtZXRlcihuYW1lKSB7XG4vLyAgICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvW1xcW10vLCAnXFxcXFsnKS5yZXBsYWNlKC9bXFxdXS8sICdcXFxcXScpXG4vLyAgICAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cCgnW1xcXFw/Jl0nICsgbmFtZSArICc9KFteJiNdKiknKVxuLy8gICAgIHZhciByZXN1bHRzID0gcmVnZXguZXhlYyhsb2NhdGlvbi5zZWFyY2gpXG4vLyAgICAgcmV0dXJuIHJlc3VsdHMgPT09IG51bGwgPyAnJyA6IGRlY29kZVVSSUNvbXBvbmVudChyZXN1bHRzWzFdLnJlcGxhY2UoL1xcKy9nLCAnICcpKVxuLy8gfVxuIl19
